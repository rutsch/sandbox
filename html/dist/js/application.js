function reloadApp(){location.reload()}function getEl(e){return document.getElementById(e)||document.getElementsByClassName(e)[0]||document.getElementsByTagName(e)[0]||null}function findPos(e){var t=0,a=0;if(e.offsetParent)do t+=e.offsetLeft,a+=e.offsetTop;while(e===e.offsetParent);return[t,a]}function logAction(e,t,a){}function lon2x(e){var t=2.752,a=473.75,o=e*t+a;return o}function lat2y(e){var t=-2.753,a=231,o=e*t+a;return o}function collectionHas(e,t){for(var a=0,o=e.length;a<o;a++)if(e[a]===t)return!0;return!1}function getFirstLevelChildElements(e,t){for(var a=e.getElementsByTagName(t),o=[],n=0;n<a.length;n++)a[n].parentNode===e&&o.push(a[n]);return o}function findParentBySelector(e,t){for(var a=getEl(e),o=document.querySelectorAll(t),n=a.parentNode;n&&!collectionHas(o,n);)n=n.parentNode;return n}function getParamStringFromObject(e){var t=[];for(var a in e)"string"==typeof a&&t.push(a+"="+encodeURIComponent(e[a]));return t.join("&")}function containsClass(e,t){var a="string"==typeof e?e:e.getAttribute("class");return"string"==typeof a&&a.split(" ").indexOf(t)>-1}function toggleClass(e,t,a){var o=e.getAttribute("class");"boolean"==typeof a?a?"string"==typeof o?containsClass(o,t)||e.setAttribute("class",o+" "+t):e.setAttribute("class",t):"string"==typeof o&&containsClass(o,t)&&e.setAttribute("class",o.replace(new RegExp("\\b"+t+"\\b","g"),"")):("string"==typeof o&&(o=containsClass(e,t)?o.replace(new RegExp("\\b"+t+"\\b","g"),""):o+" "+t),e.setAttribute("class",o))}function svgSetTransform(e,t){var a=!0;if(a){"Infinity"===t.scale&&(t.scale=1);var o="matrix("+t.scale+",0,0,"+t.scale+","+t.translatex+","+t.translatey+")";e.setAttributeNS(null,"transform",o)}else{t.transformmatrix.a=t.scale,t.transformmatrix.b=0,t.transformmatrix.c=0,t.transformmatrix.d=t.scale,t.transformmatrix.e=t.translatex,t.transformmatrix.f=t.translatey;var n=e.ownerSVGElement.createSVGTransformFromMatrix(t.transformmatrix);e.transform.baseVal.initialize(n)}}function svgRetrieveZoomLevel(e){if(!e)return 1;var t=parseFloat(e.getAttributeNS(null,"transform").replace(/.*bla\(\s*(\d[^\,]*).*/g,"$1"));return isNaN(t)?1:t}function getTransformedWidth(e,t){var a=t.getTransformToElement(e);return a.a*t.cx.animVal.value}function rgbFromHex(e){function t(e){return"#"===e.charAt(0)?e.substring(1,7):e}function a(e){return parseInt(t(e).substring(0,2),16)}function o(e){return parseInt(t(e).substring(2,4),16)}function n(e){return parseInt(t(e).substring(4,6),16)}return{r:a(e),g:o(e),b:n(e)}}function colourGradientor(e,t,a){var o=(2*e-1+1)/2,n=1-o;return[parseInt(t[0]*o+a[0]*n,10),parseInt(t[1]*o+a[1]*n,10),parseInt(t[2]*o+a[2]*n,10)]}function encodeUrl(e){return escape(e).replace(/\+/g,"%2C").replace(/\"/g,"%22").replace(/\'/g,"%27").replace(/\//g,"%2F")}function generateUniqueId(){var e=Math.random();e=Math.round(1e4*e);var t=Math.random();t=Math.round(1e4*e);var a=new Date,o=a.getSeconds();return e=e+"x"+o+"x"+t}function iterate(e,t,a){for(var o in e)if(e.hasOwnProperty(o))if("object"==typeof e[o])iterate(e[o],t,a);else if(e[o]===a&&o===t){returnObj=e,matchFound=!0;break}return returnObj}function handleShibbolethLoginRequired(e){null==window.objStore.getlocalstorageitem("stateremembered")&&(location.hash.indexOf("login/")>-1?window.objStore.setlocalstorageitem("stateremembered",JSON.stringify(window.app.defaultpagestate)):window.objStore.setlocalstorageitem("stateremembered",JSON.stringify(window.objPageState.hash2object(location.hash)))),e?e(null,{authenticated:!1}):window.objLogin.logout()}function psv(e,t,a,o){var n,i="",r=!1;"prod"===window.objConfig.sitetype&&(r=!1),window.objLoading.show(),n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){if(4===this.readyState)if(200===this.status)if(window.objLoading.hide(),n.responseText.toLowerCase().indexOf('name="samlrequest"')>0)handleShibbolethLoginRequired(o);else if(r)try{var e=JSON.parse(n.responseText);e.hasOwnProperty("error")&&("Not authenticated"===e.error.message||"Token mismatch"===e.error.message)?(window.objStore.setlocalstorageitem("reloadtime",(new Date).getTime()/1e3),window.objLogin.logout()):o(null,e)}catch(e){o(e)}else{var e=JSON.parse(n.responseText);e.hasOwnProperty("error")&&("Not authenticated"===e.error.message||"Token mismatch"===e.error.message)?window.objLogin.logout():o(null,e)}else o(n.statusText)},i=getParamStringFromObject(a),n.open(e,t+("GET"===e?"?"+i:""),!0),n.crossDomain=!0,n.withCredentials=!0,"POST"===e?(n.timeout=4e4,n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(i)):n.send()}function serverSideRequest(e){function t(){try{return new XMLHttpRequest}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}}var a,o,n,i,r=!0,l=!1,s=!1,d=!1,p=!1,u="",w="",c="post",g="",b=null;if(w="undefined"!=typeof e.url?e.url:"",b="undefined"!=typeof e.callback?e.callback:null,"undefined"!=typeof e.bypasscache&&"true"===e.bypasscache&&(p=!0),c="undefined"!=typeof e.method?e.method.toLowerCase():"get",a="undefined"!=typeof e.debug?e.debug+"":"false","true"===a.toLowerCase()&&(s=!0),g="undefined"!=typeof e.arrdata?e.arrdata:"","string"==typeof g&&(g="undefined"!=typeof e.formdata?e.formdata:""),s&&(g.debug="true"),"string"!=typeof g&&(l=!0),null==b&&(r=!1),s&&alert("Parameters recieved:\nstrUrl="+w+"\ncallbackFunction="+b+"\nstrMethod="+c+"\narrFormData="+g+"\nbolSubmitFormData="+l+"\nbolAsync="+r),p&&("post"===c?w+=w.indexOf("?")>0?"&rnd="+generateUniqueId():"?rnd="+generateUniqueId():"string"!=typeof g?g.rnd=generateUniqueId():(g=new Array,g.rnd=generateUniqueId(),l=!0)),l){var f=new Array;for(o in g)"function"!=typeof g[o]&&"object"!=typeof g[o]&&(n=encodeUrl(g[o]),f.push(o+"="+n));u=f.join("&"),s&&alert("Form data sent to server:\n"+u)}var v=t();r?v.onreadystatechange=function(){4===this.readyState&&(200===this.status?(i=v.responseText,s&&alert("just before callback function\n\n"+i),b(void 0,i)):(i="ERROR: There was a problem retrieving the server side data:\n"+v.statusText,b(i)))}:v.onreadystatechange=function(){},"get"===c.toLowerCase()&&u.length>0&&(w+="?"+u);try{v.open(c.toUpperCase(),w,r),l&&"post"===c.toLowerCase()?(v.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),v.send(u)):d?v.send(g):v.send(null)}catch(e){if(!r)return null;b(JSON.stringify(e))}if(!r)return v.responseText}function countryClicked(e,t,a){var o=getEl(e);if(t?window.objPageState.mobile=!0:window.objPageState.mobile=!1,window.objPageState.state.filter.oru!==e&&containsClass(o,"no-data")===!1){var n="detail",i=e;"string"==typeof a&&"worldmap"===a&&(n="worldmap",i="none"),window.objPageState.updatepagestate({view:n,filter:{oru:i,datasource:window.objDataFilter.state.filter.datasource,subtype:window.objDataFilter.state.filter.subtype}})}}function setNumberSeperators(e){var t="",a=new String(e);a=a.split(".");var o=a[1]?a[1]:"";a=a[0].split("").reverse();for(var n=0;n<=a.length-1;n++)t=a[n]+t,(n+1)%3===0&&a.length-1!==n&&(t=","+t);return""!==o&&(t+=".",t+=o),t.indexOf(".")>-1&&t.split(".")[1].length<2&&(t+="0"),t}function formatFinancialData(e){var t="";return t=parseFloat(e)<0?"("+setNumberSeperators(0-parseFloat(e))+")":setNumberSeperators(e)}function formatMoney(e,t,a,o,n){if(void 0===e)return e;var t=isNaN(t=Math.abs(t))?2:t,o=void 0===o?".":o,a=void 0===a?",":a,n=void 0===n?"":n,i=e<0?"-":"",r=parseInt(e=Math.abs(+e||0).toFixed(t),10)+"",l=(l=r.length)>3?l%3:0;return i+n+(l?r.substr(0,l)+a:"")+r.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?o+Math.abs(e-r).toFixed(t).slice(2):"")}function loadUrlInBrowser(e){var t=!1;arguments.length>1&&(t=arguments[1]),window.objAnalytics.data.events.push({category:e.match(/^https?:\/\/.+\.(zip|dmg|txt|cfg|gz|pl|pdf)$/i)?"download":"link",action:"click",label:e}),window.app.state.webbrowser?t?window.open(e):location.href=e:t?window.open(e,"_system","location=no"):window.open(e,"_blank","location=no")}function hasProperty(e,t){return"object"==typeof e&&null!==e&&e.hasOwnProperty(t)}function isPublicSite(){return window.objConfig.sitetype.indexOf("public")>-1}function translateFragment(e){if(window.objConfig.fragments.hasOwnProperty(e)){var t=window.objConfig.fragments[e];return t.indexOf("CO2")>-1&&(t=t.replace(/^(.*CO)(\d)(.*)$/,"$1<sub>$2</sub>$3")),t.indexOf("m3")>-1&&(t=t.replace(/^(.*m)(\d)(.*)$/,"$1<sup>$2</sup>$3")),t}return"["+e+"]"}function cloneObject(e){try{return JSON.parse(JSON.stringify(e))}catch(e){return console.trace(),console.log("---------------")}}function css(e,t){for(var a in t)"string"==typeof a&&(e.style[a]=t[a])}function renderInfographic(e){"undefined"==typeof e.initial&&(e.initial=!0),"undefined"==typeof e.setall&&(e.setall=!0),generateArc({targetnode:objArcProps.targetnode,centerx:objArcProps.centerx,centery:objArcProps.centery,radius:objArcProps.radius,leftwrapper:null,angle:e.angle}),e.setall&&generateArc({targetnode:objArcProps.targetleftnode,centerx:objArcProps.centerx,centery:objArcProps.centery,radius:objArcProps.radius,leftwrapper:objArcProps.targetleftwrapper,angle:360-e.angle}),e.initial&&(objArcProps.anglestored=e.angle)}function applyInfographicDelta(e){renderInfographic(e>=objArcProps.anglestored?{angle:e,initial:!1,setall:!0}:{angle:e,initial:!1,setall:!1})}function generateArc(e){var t=360-e.angle;t<=0&&(t=.1);var a=[];a.push("M "),a.push(e.centerx+e.radius*Math.cos((270-t)*Math.PI/180)+" "),a.push(e.centery+e.radius*Math.sin((270-t)*Math.PI/180)+" A "),a.push(e.radius+" "+e.radius+" 0 "+(t<180?"1":"0")+" 0 "),a.push(e.centerx+e.radius*Math.cos(270*Math.PI/180)+" "),a.push(e.centery+e.radius*Math.sin(270*Math.PI/180)),null!=e.leftwrapper&&e.leftwrapper.setAttributeNS(null,"transform","rotate("+t+","+e.centerx+","+e.centery+")"),e.targetnode.setAttributeNS(null,"d",a.join(""))}function animateArc(e,t){var a={angle:e.start};TweenLite.to(a,t,{angle:e.end,onUpdate:function(){generateArc({targetnode:objArcProps.targetnode,centerx:objArcProps.centerx,centery:objArcProps.centery,radius:objArcProps.radius,leftwrapper:null,angle:a.angle}),generateArc({targetnode:objArcProps.targetleftnode,centerx:objArcProps.centerx,centery:objArcProps.centery,radius:objArcProps.radius,leftwrapper:objArcProps.targetleftwrapper,angle:360-a.angle})},onComplete:function(){objArcProps.anglestored=e.end}})}var objUtils={},matchFound=!1,returnObj={},objStore={vars:{uselocalstorage:!0},store:null,setlocalstorageitem:function(e,t){objStore.store.setItem(e,t)},getlocalstorageitem:function(e){return objStore.store.getItem(e)},removelocalstorageitem:function(e){objStore.store.removeItem(e)},init:function(){var e=this;try{var t="t_"+Date.now();localStorage.setItem(t,t);var a=localStorage.getItem(t);if(localStorage.removeItem(t),t!==a)throw new Error;objStore.store=window.localStorage}catch(t){e.vars.uselocalstorage=!1,objStore.store=new MemoryStorage}null==e.getlocalstorageitem("statguid")&&e.setlocalstorageitem("statguid","xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,a="x"===e?t:3&t|8;return a.toString(16)}))}};!function(e,t,a){"function"==typeof define&&define.amd?define("memorystorage",[],function(){return a()}):"object"==typeof exports?module.exports=a():e[t]=a()}(this,"MemoryStorage",function(){"use strict";function e(n){function i(){var e=Object.keys(r).filter(function(e){return!(e in t)});return e.concat(Object.keys(l))}n=n||"global";var r=o[n];if(r)return r;if(!(this instanceof e))return new e(n);r=o[n]=this;var l={};return Object.defineProperty(r,a,{enumerable:!1,configurable:!0,get:function(){return l}}),Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,get:function(){return n}}),Object.defineProperty(r,"length",{enumerable:!0,configurable:!0,get:function(){return i().length}}),r.getItem=function(e){return e in t?this[a][e]:this[e]},r.setItem=function(e,o){e in t?this[a][e]=o:this[e]=o},r.removeItem=function(e){e in t?delete this[a][e]:delete this[e]},r.key=function(e){var t=i();return e>=0&&e<t.length?t[e]:null},r.clear=function(){for(var e,o=(Object.keys(this).filter(function(e){return!(e in t)})),n=0;e=o[n];n++)e in t||delete this[e];o=Object.keys(this[a]);for(var e,n=0;e=o[n];n++)delete this[a][e]},"undefined"==typeof Proxy?r:new Proxy(r,{ownKeys:function(){return i()}})}var t={clear:1,getItem:1,id:1,key:1,length:1,removeItem:1,setItem:1},a="__memorystorage_cloaked_items__",o={};return e});var objInfographic={},objArcProps={targetnode:null,targetleftwrapper:null,targetleftnode:null,centerx:150,centery:125,radius:100,angle:0,anglestored:0},objFooter={init:function(){}},objHeader={el:{backbutton:null,togglefavouritebutton:null,regionname:null,breadcrumb:null,breadcrumbmarquee:null,regionnamemarquee:null},state:{showbackbutton:!1,togglefavouritevisible:!1},hidebackbutton:function(){var e=this;window.TweenLite.to(e.el.backbutton,.3,{display:"none",onComplete:function(){}})},showbackbutton:function(){var e=this;e.state.showbackbutton&&window.TweenLite.to(e.el.backbutton,.3,{display:"block",onComplete:function(){}})},hidefavouritebutton:function(){var e=this;window.TweenLite.to(e.el.togglefavouritebutton,.3,{display:"none",onComplete:function(){}})},showfavouritebutton:function(){var e=this;window.TweenLite.to(e.el.togglefavouritebutton,.3,{display:"block",onComplete:function(){window.objBookmarks.isfavourite()?e.el.togglefavouritebutton.className=e.el.togglefavouritebutton.className+" selected":e.el.togglefavouritebutton.className=e.el.togglefavouritebutton.className.replace(" selected","")}})},togglefavourite:function(e){var t="fav_"+window.objPageState.state.filter.orulevel+"_"+window.objPageState.state.filter.mru+"_"+window.objPageState.state.filter.oru,a="";if(window.objBookmarks.isfavourite())window.objStore.removelocalstorageitem(t),e.className=e.className.replace(" selected",""),a="remove favourite";else{var o={oru:window.objPageState.state.filter.orulevel,mru:window.objPageState.state.filter.mru,region_id:window.objPageState.state.filter.oru,region_name:window.objOruFilter.getregionnamebyid(window.objPageState.state.filter.oru),breadcrumb:window.objMruFilter.getmrufilterbreadcrumb()};window.objStore.setlocalstorageitem(t,JSON.stringify(o)),e.className=e.className+" selected",a="add favourite"}window.objAnalytics.data.events.push({category:"button",action:"click",label:a}),window.objBookmarks.renderfavouritepanel()},btnbackclick:function(){var e=this;e.hidebackbutton(),e.hidefavouritebutton(),window.objHeader.setregionname(window.objMap.state.mapname),window.objPageState.updatepagestate({view:"worldmap",filter:{oru:"none"}})},setregionname:function(e){var t=this;if("undefined"!=typeof e)if(window.isPublicSite())for(var a=document.getElementsByClassName("region_info_title"),o=0;o<a.length;o++)a[o].innerHTML=e;else window.TweenLite.to(t.el.regionname,.3,{opacity:0,onComplete:function(){e!==window.objMap.state.mapname&&(e=window.objMap.state.mapname+" &bull; "+e),t.el.regionname.innerHTML=e,t.el.regionnamemarquee=new Marquee("region_name",{behavior:"scroll",direction:"rtl",interrupt:"no",step:.1}),t.el.regionname.scrollWidth>t.el.regionname.clientWidth||t.el.regionnamemarquee&&t.el.regionnamemarquee.pause(),window.TweenLite.to(t.el.regionname,.3,{opacity:1})}})},setbreadcrumb:function(e){var t=this;window.TweenLite.to(t.el.breadcrumb,.3,{opacity:0,onComplete:function(){t.el.breadcrumb.innerHTML=e,t.el.breadcrumbmarquee=new Marquee("filter_breadcrumb",{behavior:"scroll",direction:"rtl",interrupt:"no",step:.1}),t.el.breadcrumb.scrollWidth>t.el.breadcrumb.clientWidth||t.el.breadcrumbmarquee&&t.el.breadcrumbmarquee.pause(),window.TweenLite.to(t.el.breadcrumb,.3,{opacity:1})}})},init:function(){var e=this;e.el.backbutton=window.getEl("btn_back"),e.el.togglefavouritebutton=window.getEl("toggle_favourite"),e.el.regionname=window.getEl("region_name"),e.el.breadcrumb=window.getEl("filter_breadcrumb"),e.state.showbackbutton=window.app.state.width<768}},objMap={state:{visible:null},el:{mapwrapper:null,elsvgholder:null,svgcontentwrapper:null},vars:{showdetailview:!1,regionidtoshow:null,zoomdelta:.3},data:null,maps:{world:{url:"jvector_world.svg"},region:{url:"philips_regions.svg"},market:{url:"philips_markets.svg"},country:{url:"jvector_countries.svg"}},getcolorforpercentage:function(e,t,a,o){var n=!0;e/=100;var i=[{pct:1e-7,color:t},{pct:.5,color:a},{pct:1,color:o}],r=2,l=0;return n&&(e<=.5?(r=1,e*=2):(l=1,r=2,e=2*(e-.5))),"rgb("+window.colourGradientor(e,[i[r].color.r,i[r].color.g,i[r].color.b],[i[l].color.r,i[l].color.g,i[l].color.b]).join(",")+")"},retrieveworldmapsvg:function(){var e=this;window.objTouchVars.elanimate=null,e.state.mapname=window.objOruFilter.convertoruleveltomarket(window.objPageState.state.filter.orulevel);var t=window.objStore.getlocalstorageitem("map_"+e.state.mapname+"_v"+window.objConfig.localstorageversion),a=!0;if(t&&t.indexOf("<svg")>-1&&(a=!1),a){var o=[];return o.type="xml",o.file=e.maps[e.state.mapname.toLowerCase()].url,o.method="getsvgworldmap",o.fulldomain=location.protocol+"//"+location.hostname,o.token=window.objLogin.token,o.v=window.pageVars.version,t=window.serverSideRequest({url:window.objConfig.urls.authurl2,formdata:o,method:"get",debug:!1}),t=t.replace(/fill:#00ffff/g,""),"string"==typeof t?(window.objStore.setlocalstorageitem("map_"+e.state.mapname+"_v"+window.objConfig.localstorageversion,t),t):""}return t.replace(/fill:#00ffff/g,"")},getworldmapdata:function(){var e,t=this;switch(window.objDataFilter.state.filter.datasource){case"lives_improved":case"":e={fulldomain:location.protocol+"//"+location.hostname,method:"getworldmapdata",type:"json",token:window.objLogin.token,oru:window.objPageState.state.filter.orulevel,mru:window.objPageState.state.filter.mru,snapshotid:window.objConfig.currentsnapshotid},window.psv("GET",window.objConfig.urls.dynamicresourceurl,e,function(e,a){null!=e?window.objError.show("There was an error retrieving the worldmap data. "+("object"==typeof e?JSON.parse(e):e),!0):a.hasOwnProperty("authenticated")&&!a.authenticated?window.handleShibbolethLoginRequired():a.hasOwnProperty("error")?window.objError.show("There was an error retrieving the worldmap data. "+a.error.message,!0):t.postprocessworldmapdata(a)});break;case"sustainability":t.postprocessworldmapdata(window.objData.sustainability);break;case"global_presence":t.postprocessworldmapdata(window.objData.global_presence)}},createdatatypelistforregions:function(e){var t=[],a=[],o=window.objOruFilter.retrieveoruarr(e);return o.forEach(function(e){t=[],a=[];var o="philips_"+e.guid;if(window.objData.sustainability&&window.objData.sustainability.snapshotdata){for(var n in window.objData.sustainability.snapshotdata[o])window.objData.sustainability.snapshotdata[o].hasOwnProperty(n)&&t.push(n);for(var n in window.objData.global_presence.snapshotdata[o])window.objData.global_presence.snapshotdata[o].hasOwnProperty(n)&&a.push(n)}}),{global_presence:a,sustainability:t}},postprocessworldmapdata:function(e){var t=this,a=!0,o=window.rgbFromHex("#cae3e9"),n=window.rgbFromHex("#46b0a8");window.objLoading.show(),t.data=window.cloneObject(e.snapshotdata);var i=window.getEl("svgcontentwrapper"),r=window.getFirstLevelChildElements(i,"path");if(0===r.length&&(r=window.getFirstLevelChildElements(i,"g")),"lives_improved"===window.objDataFilter.state.filter.datasource)for(var l in t.data)"string"==typeof l&&(t.data[l].lprc=100*t.data[l].l/t.data[l].p);var s={},d={},p=window.objOruFilter.retrieveoruarr(),u="philips_";p.forEach(function(e,a){if(0===a&&e.guid.indexOf("_")>-1&&(u=""),0===a)for(var o in t.data[u+e.guid])"string"==typeof o&&(d[o]={min:null,max:null});"object"==typeof t.data[u+e.guid]&&(s[u+e.guid]=t.data[u+e.guid])});for(var l in s)if("string"==typeof l)for(var w in d)if("string"==typeof w){var c=parseFloat(s[l][w]);isNaN(c)||(null===d[w].min&&null===d[w].max?d[w].min=d[w].max=c:c<d[w].min?d[w].min=c:c>d[w].max&&(d[w].max=c))}var g=100,b=100;("1"===window.objPageState.state.filter.orulevel||"global_presence"!==window.objDataFilter.state.filter.datasource&&"sustainability"!==window.objDataFilter.state.filter.datasource||"all"===window.objDataFilter.state.filter.subtype)&&"lives_improved"!==window.objDataFilter.state.filter.datasource||("lives_improved"===window.objDataFilter.state.filter.datasource?(g=d.lprc.max,b=d.lprc.min):(g=d[window.objDataFilter.state.filter.subtype].max,b=d[window.objDataFilter.state.filter.subtype].min));var f="1"===window.objPageState.state.filter.orulevel||("global_presence"===window.objDataFilter.state.filter.datasource||"sustainability"===window.objDataFilter.state.filter.datasource)&&"all"===window.objDataFilter.state.filter.subtype,v=0,m=g===b?1:(100-v)/(g-b);window.objConfig.colors[window.objPageState.state.filter.sector].hasOwnProperty("rgb")||(window.objConfig.colors[window.objPageState.state.filter.sector].rgb={},window.objConfig.colors[window.objPageState.state.filter.sector].rgb.low=window.rgbFromHex(window.objConfig.colors[window.objPageState.state.filter.sector].low),window.objConfig.colors[window.objPageState.state.filter.sector].rgb.middle=window.rgbFromHex(window.objConfig.colors[window.objPageState.state.filter.sector].middle),window.objConfig.colors[window.objPageState.state.filter.sector].rgb.high=window.rgbFromHex(window.objConfig.colors[window.objPageState.state.filter.sector].high));for(var h=0;h<r.length;h++){var y=r[h],j="UK"===y.id?"GB":y.id,l=window.objPageState.state.filter.mru+"_"+(4!==window.objPageState.state.filter.orulevel?j.toLowerCase():j),x=!!t.data[l]&&t.data[l];if(x){var _,S=!1;if("lives_improved"===window.objDataFilter.state.filter.datasource)_=t.data[l].percentageLI=t.data[l].lprc,t.data[l].l<100&&(S=!0);else if("all"===window.objDataFilter.state.filter.subtype){var P=[];for(var E in x)if("string"==typeof E){var c=parseFloat(x[E]);isNaN(c)?"-"===x[E]?P.push("no"):P.push("yes"):0===c?P.push("no"):P.push("yes")}S=P.indexOf("yes")===-1}else _=x[window.objDataFilter.state.filter.subtype],"-"===_&&(S=!0);if(a){var O="#000";if(S&&window.objConfig.hideinactivecountries)O=t.getcolorforpercentage(100,o,o,o);else if(f)O=t.getcolorforpercentage(100,n,n,n);else{var k=100;g>b&&(k=(_-b)*m),k>=100&&(k=100),k<0&&(k=0),O=t.getcolorforpercentage(k,window.objConfig.colors[window.objPageState.state.filter.sector].rgb.low,window.objConfig.colors[window.objPageState.state.filter.sector].rgb.middle,window.objConfig.colors[window.objPageState.state.filter.sector].rgb.high)}y.style.fill=O,window.toggleClass(y,"no-data",S);for(var F=y.getElementsByTagName("*"),T=0;T<F.length;T++)"path"!==F[T].nodeName&&"polygon"!==F[T].nodeName&&"rect"!==F[T].nodeName&&"g"!==F[T].nodeName&&"polyline"!==F[T].nodeName||(F[T].style.fill=O,window.toggleClass(F[T],"no-data",S))}}else y.style.fill=o}t.el.rootanimate=window.getEl("viewport"),t.el.rootsvg=window.getEl("holder_1000").getElementsByTagName("svg")[0],t.el.svgcontentwrapper=window.getEl("svgcontentwrapper"),t.state.rootanimateattributevalues=t.retrievesvgelementobject(t.el.rootanimate);var C=!0;C?(window.objTouchSettings.debug=!1,window.objTouchSettings.debugtointerface=!1,window.objTouchSettings.debugtoconsole=!0,window.objZoomPanSettings.mobile=window.app.state.mobile,window.objZoomPanSettings.clickcallback=function(e){var t=e.srcElement;"undefined"==typeof t&&(t=e.originalTarget);var a=t.nodeName,o=t.id?t.id:"",n=t.parentNode,i=(n.nodeName,n.id?n.id:"");""===o&&(o=i),"path"!==a&&"g"!==a&&"polygon"!==a||window.countryClicked(o)},window.initSgvZoomPan(t.el.rootsvg,t.el.rootanimate),t.resizeworldmap()):window.initZoomPan(t.el.rootsvg),t.moveworldmap((window.app.state.width-t.el.rootanimate.getBBox().width)/2,0),window.objLoading.hide(),window.objHeader.setregionname(t.state.mapname),window.objHeader.setbreadcrumb(window.objMruFilter.getmrufilterbreadcrumb()),t.vars.showdetailview?t.detailspanel():window.objRegionInfo.hide(),t.vars.showdetailview=!1,t.el.elsvgholder.style.visibility="visible",window.objRegionInfo.showhidelegend(g,b)},updatemap:function(e,t){var a=this;"boolean"==typeof e?a.vars.showdetailview=e:a.vars.showdetailview=!1,a.el.elsvgholder.style.visibility="hidden";var o=a.retrieveworldmapsvg();null!=o&&("function"==typeof t&&t(),window.removeHandlers(function(){a.el.elsvgholder.innerHTML="",a.el.elsvgholder.innerHTML=o,window.objOruFilter.rendermobilegeographylist(),a.getworldmapdata()}))},retrievesvgelementobject:function(e){var t=this;window.objSvgElementProperties={},window.objSvgElementProperties.translatex=0,window.objSvgElementProperties.translatey=0,window.objSvgElementProperties.scale=1;var a=window.findPos(e.ownerSVGElement);window.objSvgElementProperties.x=a[0],window.objSvgElementProperties.y=a[1];for(var o,n=0,i=t.el.rootanimate.attributes,r=i.length;n<r;n++)o=i.item(n),"transform"===o.nodeName,window.objSvgElementProperties[o.nodeName]=o.nodeValue;return window.objSvgElementProperties.transformmatrix=e.getCTM(),window.objSvgElementProperties.size=e.getBoundingClientRect(),window.objSvgElementProperties},resizeworldmap:function(){var e=this;if("undefined"!=typeof e.el.rootsvg){var t=e.el.elsvgholder.clientHeight;e.el.rootsvg.setAttributeNS(null,"viewBox","0 0 "+window.app.state.width+" "+t),e.el.rootsvg.setAttributeNS(null,"enable-background","new 0 0 "+window.app.state.width+" "+t),e.el.rootsvg.setAttributeNS(null,"width",window.app.state.width),e.el.rootsvg.setAttributeNS(null,"height",t)}},moveworldmap:function(e,t){if(null!=window.objTouchVars.elanimate){var a={gesture:{center:{pageX:0,pageY:0}},clientX:0,clientY:0,target:{tagName:"svg"}};window.handleClickTouchStart(a),window.objTouchVars.clickstart=!1,a={gesture:{center:{pageX:e,pageY:t}},clientX:e,clientY:t},window.handleDrag(a),window.handleClickTouchEnd(a)}},centerworldmap:function(e){var t=this;window.svgSetTransform(e,{scale:t.state.rootanimateattributevalues.scale,translatex:0,translatey:0,transformmatrix:{}}),t.el.rootanimate.setAttributeNS(null,"transform",""),t.moveworldmap((window.app.state.width-t.el.rootanimate.getBBox().width)/2,0),t.state.rootanimateattributevalues=t.retrievesvgelementobject(t.el.rootanimate)},maximizeworldmap:function(e){var t=this,a=1,o=0,n=0;window.app.state.width/window.app.state.height>=t.state.rootanimateattributevalues.size.width/t.state.rootanimateattributevalues.size.height?(a=window.app.state.height/t.state.rootanimateattributevalues.size.height,o=(window.app.state.width-t.state.rootanimateattributevalues.size.width*a)/2):(a=window.app.state.width/t.state.rootanimateattributevalues.size.width,n=(window.app.state.height-t.state.rootanimateattributevalues.size.height*a)/2),window.svgSetTransform(e,{scale:a,translatex:0,translatey:0,transformmatrix:{}}),t.moveworldmap(o,n),t.state.rootanimateattributevalues=t.retrievesvgelementobject(t.el.rootanimate)},hideselectedcountries:function(){Array.prototype.slice.call(objMap.el.elsvgholder.getElementsByClassName("active")).forEach(function(e){e.removeAttribute("class")})},zoom:function(e){var t=this,a=t.state.rootanimateattributevalues.scale,o=window.objTouchVars.elsvg.createSVGPoint();o.x=window.app.state.width/2,o.y=window.app.state.height/2,window.handleZoom(o,"in"===e?a+t.vars.zoomdelta:a-t.vars.zoomdelta),t.state.rootanimateattributevalues=t.retrievesvgelementobject(t.el.rootanimate)},detailspanel:function(){var e=this;window.objOruFilter.state.selectedoruguid=window.objPageState.state.filter.oru,window.objBookmarks.isfavourite()?window.getEl("toggle_favourite").className=window.getEl("toggle_favourite").className+" selected":window.getEl("toggle_favourite").className=window.getEl("toggle_favourite").className.replace(" selected",""),window.objHeader.showbackbutton(),window.objHeader.showfavouritebutton(),window.app.setmainwrapperclass();var t=window.objPageState.state.filter.mru+"_"+(window.objPageState.state.filter.oru.length<4?window.objPageState.state.filter.oru:window.objPageState.state.filter.oru.toLowerCase()),a=e.data[t],o=window.getEl(window.objPageState.state.filter.oru);if(o){var n=o.getAttribute("class");"string"==typeof n&&"no-data"===n?window.objPageState.updatepagestate({view:"worldmap",filter:{datasource:window.objDataFilter.state.filter.datasource,subtype:window.objDataFilter.state.filter.subtype,oru:"none"}}):window.TweenLite.to(o,0,{opacity:.7,onComplete:function(){e.hideselectedcountries(),o.setAttribute("class","active"),window.app.state.width>768?e.updateui(a,window.objPageState.state.filter.oru,o):window.TweenLite.to(e.el.elsvgholder,.2,{opacity:0,onComplete:function(){e.updateui(a,window.objPageState.state.filter.oru,o)}})}})}},updateui:function(e,t,a){var o=this;if(o.setroundeddatainui(e),"lives_improved"===window.objDataFilter.state.filter.datasource){window.objRegionInfo.el.data.percentagelivesimproved.textContent=o.roundlivesimprovedpercentage(e.percentageLI)+"%";var n=window.getEl("lives_improved_icons");n.innerHTML="";for(var i=0;i<100;i++){var r=document.createElement("img");i<e.percentageLI?r.setAttribute("src","img/person-selected.png"):r.setAttribute("src","img/person.png"),n.appendChild(r)}}window.objHeader.setregionname(window.objOruFilter.getregionnamebyid(t.length<4?t:t.toLowerCase())),window.objRegionInfo.show(),window.TweenLite.to(a,.3,{opacity:1,onComplete:function(){}})},setroundeddatainui:function(e){var t=this,a=t.roundlivesimproveddataobject(e),o=window.getEl("region_info_wrapper lives_improved"),n=window.getEl("region_info_wrapper global_presence"),i=window.getEl("region_info_wrapper sustainability");if("lives_improved"===window.objPageState.state.filter.datasource)window.objRegionInfo.el.data.nrlivesimproved.textContent=a.displayl+" "+window.translateFragment("million"),window.objRegionInfo.el.data.labellivesimproved.textContent=window.translateFragment("lives_improved"),window.objRegionInfo.el.data.gdp.textContent=a.displayg+a.labelg,window.objRegionInfo.el.data.population.textContent=a.displayp+a.labelp,window.TweenLite.to(n,.3,{opacity:0,"z-index":-1,onComplete:function(){}}),window.TweenLite.to(i,.3,{opacity:0,"z-index":-2,onComplete:function(){}}),window.TweenLite.to(o,.3,{opacity:1,"z-index":1,onComplete:function(){}});else if("global_presence"===window.objPageState.state.filter.datasource)window.objRegionInfo.el.data.assets.textContent=a.value_assets,window.objRegionInfo.el.data.employees.textContent=a.value_employees,window.objRegionInfo.el.data.female.textContent=a.value_female,window.objRegionInfo.el.data.male.textContent=a.value_male,window.objRegionInfo.el.data.plants.textContent=a.value_plants,window.objRegionInfo.el.data.research.textContent=a.value_research,window.objRegionInfo.el.data.sales.textContent=a.value_sales,window.TweenLite.to(n,.3,{opacity:1,"z-index":1,onComplete:function(){}}),window.TweenLite.to(i,.3,{opacity:0,"z-index":-1,onComplete:function(){}}),window.TweenLite.to(o,.3,{opacity:0,"z-index":-2,onComplete:function(){}});else if("sustainability"===window.objPageState.state.filter.datasource){try{window.objRegionInfo.el.data.co2.textContent=a.value_co2,window.objRegionInfo.el.data.emission.textContent=a.value_emissions,window.objRegionInfo.el.data.emissionhaz.textContent=a.value_emissionshaz,window.objRegionInfo.el.data.trc.textContent=a.value_trc,window.objRegionInfo.el.data.waste.textContent=a.value_waste,window.objRegionInfo.el.data.wasterecycled.textContent=a.value_wasterecycled,window.objRegionInfo.el.data.water.textContent=a.value_water}catch(e){console.dir(e)}window.TweenLite.to(n,.3,{opacity:0,"z-index":-1,onComplete:function(){}}),window.TweenLite.to(i,.3,{opacity:1,"z-index":1,onComplete:function(){}}),window.TweenLite.to(o,.3,{opacity:0,"z-index":-2,onComplete:function(){}})}},roundlivesimproveddataobject:function(e){var t=0;if("lives_improved"===window.objPageState.state.filter.datasource)return e.l>=0&&(e.l>=1e9&&(e.roundedl=Math.round(e.l/1e6)),e.l>=1e8&&e.l<1e9&&(e.roundedl=Math.round(e.l/1e6*10)/10,t=1),e.l>=1e7&&e.l<1e8&&(e.roundedl=Math.round(e.l/1e6*100)/100,t=2),e.l<1e7&&(e.roundedl=Math.round(e.l/1e6*1e3)/1e3,t=3),e.displayl=window.formatMoney(e.roundedl,t,",",".",""),e.labell=""),e.g>=0&&(e.g>1?(e.roundedg=Math.round(e.g/1),t=0):(e.roundedg=Math.round(e.g/1*10)/10,
t=1),e.displayg=window.formatMoney(e.roundedg,t,",",".",""),e.labelg=""),e.p>=0&&(e.p>1e6?(e.roundedp=Math.round(e.p/1e6),t=0):(e.roundedp=Math.round(e.p/1e6*10)/10,t=1),e.displayp=window.formatMoney(e.roundedp,t,",",".",""),e.labelp=""),e;var a=window.cloneObject(e);for(var o in a)if("string"==typeof o)switch(o){case"value_co2":case"value_emissions":case"value_emissionshaz":case"value_waste":case"value_wasterecycled":case"value_assets":case"value_employees":case"value_sales":a[o]=window.formatMoney(e[o],0,",",".","");break;case"value_water":var n=e[o]+"";n.indexOf(",")>-1&&(n=n.replace(/,/g,"")),a[o]=window.formatMoney(n,0,",",".","");break;default:a[o]=e[o]}return a},roundlivesimprovedpercentage:function(e){return e>100?100:e>=10&&e<100?Math.round(e):e<10&&e>.1?Math.round(10*e)/10:"< 0.1"},init:function(){var e=this;e.state.visible=!1,e.el.elsvgholder=window.getEl("holder_1000")}},objOverlay={state:{visible:null,tweening:null},el:{wrapper:null,closebutton:null},show:function(e,t){var a=this,o="undefined"!=typeof t&&t;a.state.tweening=!0,a.el.wrapper.style.display="block",o&&!a.state.tweening?window.TweenLite.to(a.el.wrapper,.3,{opacity:.7,delay:0,onComplete:a.showcomplete(e)}):(a.el.wrapper.style.opacity=.7,a.showcomplete(e))},showcomplete:function(e){objOverlay.state.visible=!0,objOverlay.state.tweening=!1;var t="undefined"!=typeof e&&"boolean"!=typeof e;t&&e()},hide:function(e,t){var a=this,o="undefined"!=typeof t&&t;a.state.tweening=!0,o&&!a.state.tweening?window.TweenLite.to(a.el.wrapper,.3,{opacity:0,delay:0,onComplete:a.hidecomplete(e)}):a.hidecomplete(e)},hidecomplete:function(e){objOverlay.el.wrapper.style.display="none",objOverlay.state.visible=!1,objOverlay.state.tweening=!1;var t="undefined"!=typeof e&&"boolean"!=typeof e;t&&e()},btncloseclick:function(){window.objHeader.btnbackclick()},init:function(){var e=this;e.state.tweening=!1,e.state.visible=!1,e.el.wrapper=window.getEl("overlay"),window.isPublicSite()&&(e.el.wrapper.closebutton=window.getEl("loader"),e.el.wrapper.setAttributeNS(null,"onclick","objOverlay.btncloseclick();"))}},objRegionInfo={state:{visible:null,tweening:null,panel:"current"},el:{wrapper:null,nrlivesimproved:null,labellivesimproved:null,percentagelivesimproved:null,population:null,gdp:null,legendmax:null,legendmin:null},show:function(){var e=this,t=!0;if(e.state.tweening=!0,window.isPublicSite()&&(window.objFilter.hide(),window.objOverlay.show()),window.objPageState.mobile===!0){e.removeMobileRegionInfos();var a=window.Sizzle("[data-target="+window.objPageState.state.filter.oru+"]")[0];a.className="mapselector selected",a.innerHTML=a.innerHTML+window.getEl(window.objDataFilter.state.filter.datasource).outerHTML,a.getElementsByClassName("region_info_wrapper")[0].removeAttribute("style")}else t?window.TweenLite.to(e.el.regionpanel,.3,{bottom:"0%",opacity:1,onComplete:e.showcomplete(e.el.regionpanel,t)}):(window.css(e.el.regionpanel,{bottom:"0%",opacity:1}),e.showcomplete(e.el.regionpanel,t));var o=!0;o||window.isPublicSite()||(window.objPanelInfo.show("region_info"),window.objStore.setlocalstorageitem("seenRegionInfoIntro","true"))},showcomplete:function(e,t){var a=objRegionInfo;a.state.tweening=!1,a.state.visible=!0,t?window.TweenLite.to(a.el.toolspanel,.3,{bottom:"0%",opacity:0,"z-index":-1}):window.css(a.el.toolspanel,{bottom:"0%",opacity:0,"z-index":-1})},hide:function(){var e=this,t=!0;e.state.visible&&(e.state.tweening=!0,t?window.app.state.width>768?window.TweenLite.to(e.el.regionpanel,.3,{bottom:"0%",opacity:0,onComplete:e.hidecomplete(e.el.regionpanel,t)}):window.TweenLite.to(e.el.regionpanel,.3,{bottom:"-86%",opacity:0,onComplete:e.hidecomplete(e.el.regionpanel,t)}):(window.css(e.el.regionpanel,{opacity:0,bottom:"0%"}),e.hidecomplete(e.el.regionpanel,t))),window.objPageState.mobile&&e.removeMobileRegionInfos(),window.objHeader.hidefavouritebutton()},hidecomplete:function(e,t){var a=objRegionInfo;a.state.tweening=!1,a.state.visible=!1,window.isPublicSite()&&window.objOverlay.state.visible&&window.objOverlay.hide(),t?window.TweenLite.to(a.el.toolspanel,.3,{bottom:"0%",opacity:1,"z-index":3}):window.css(a.el.toolspanel,{bottom:"0%",opacity:1,"z-index":3})},renderLegend:function(e,t){var a=this;if(a.el.legend__title.innerHTML="all"===window.objDataFilter.state.filter.subtype?window.translateFragment("lives_improved"):window.translateFragment(window.objDataFilter.mapdatatypekeys(window.objDataFilter.state.filter.subtype)),a.el.legend__subtitle.innerHTML="","undefined"==typeof e||"undefined"==typeof t||e===t)a.el.legend__top_value.innerHTML=window.translateFragment("high"),a.el.legend__low_value.innerHTML=window.translateFragment("low");else{var o=0,n=0;switch(window.objPageState.state.filter.datasource){case"lives_improved":o=window.objMap.roundlivesimprovedpercentage(e),n=window.objMap.roundlivesimprovedpercentage(t);break;default:var i={};i[window.objPageState.state.filter.subtype]=e,o=window.objMap.roundlivesimproveddataobject(i)[window.objPageState.state.filter.subtype],i[window.objPageState.state.filter.subtype]=t,n=window.objMap.roundlivesimproveddataobject(i)[window.objPageState.state.filter.subtype]}a.el.legend__top_value.innerHTML=o,a.el.legend__low_value.innerHTML=n}},showhidelegend:function(e,t){"lives_improved"===window.objPageState.state.filter.datasource||"all"!==window.objPageState.state.filter.subtype||"sustainability"===window.objPageState.state.filter.datasource&&"all"===window.objPageState.state.filter.subtype&&"3"===window.objPageState.state.filter.orulevel?(window.objRegionInfo.renderLegend(e,t),window.css(window.objRegionInfo.el.legend,{opacity:1})):window.css(window.objRegionInfo.el.legend,{opacity:0})},setdetailspanel:function(e,t){for(var a=document.getElementById(e+"_details"),o="undefined"==typeof t?"block":"all"===t?"block":"none",n=a.getElementsByTagName("div"),i=0;i<n.length;i++)window.objMap.datatypes[e].indexOf(n[i].id)===-1?n[i].style.display="none":n[i].style.display=o;"undefined"!=typeof t&&"all"!==t&&(document.getElementById(t).style.display="block")},hidedetailspanel:function(){window.objHeader.setregionname(window.objMap.state.mapname),window.objOruFilter.state.selectedoruguid="none",window.objPageState.updatepagestate({view:"worldmap",filter:{datasource:window.objDataFilter.state.filter.datasource,subtype:window.objDataFilter.state.filter.subtype,oru:"none"}})},removeMobileRegionInfos:function(){for(var e=window.Sizzle("[data-target] > div"),t=0;t<e.length;t++)e[t].parentNode.className="mapselector",e[t].parentNode.removeChild(e[t])},showhistory:function(){var e=this;window.TweenLite.to(e.el.history,.3,{opacity:1,onComplete:function(){e.state.tweening=!1,e.state.visible=!0}})},hidehistory:function(){var e=this;window.TweenLite.to(e.el.history,.3,{opacity:0,onComplete:function(){e.state.tweening=!1,e.state.visible=!0}})},init:function(){var e=this;e.state.visible=!1,e.state.tweening=!1,e.el.wrapper=window.getEl("region_info_wrapper"),e.el.regionpanel=window.getEl("region_info"),e.el.toolspanel=window.getEl("map_tools"),e.el.legend=window.getEl("map_tools__legend"),e.el.legend__title=window.getEl("map_tools__legend__title"),e.el.legend__subtitle=window.getEl("map_tools__legend__subtitle"),e.el.legend__top_value=window.getEl("map_tools__legend__top_value"),e.el.legend__low_value=window.getEl("map_tools__legend__low_value"),e.el.data={},e.el.data.nrlivesimproved=window.getEl("nr_lives_improved"),e.el.data.labellivesimproved=window.getEl("nr_lives_improved_label"),e.el.data.percentagelivesimproved=window.getEl("lives_improved_percentage"),e.el.data.population=window.getEl("nr_population"),e.el.data.gdp=window.getEl("nr_gdp"),e.el.data.assets=window.getEl("nr_assets"),e.el.data.employees=window.getEl("nr_employees"),e.el.data.female=window.getEl("nr_female"),e.el.data.male=window.getEl("nr_male"),e.el.data.plants=window.getEl("nr_plants"),e.el.data.research=window.getEl("nr_research"),e.el.data.sales=window.getEl("nr_sales"),e.el.data.co2=window.getEl("nr_co2"),e.el.data.emission=window.getEl("nr_emission"),e.el.data.emissionhaz=window.getEl("nr_emissionhaz"),e.el.data.trc=window.getEl("nr_trc"),e.el.data.waste=window.getEl("nr_waste"),e.el.data.wasterecycled=window.getEl("nr_wasterecycled"),e.el.data.water=window.getEl("nr_water"),e.el.btnshowcurrent=window.getEl("show_current"),e.el.btnshowsimulation=window.getEl("show_simulation"),e.el.history=window.getEl("graph"),e.el.regioninfotitle=window.getEl("region_info_title"),window.objArcProps.targetnode=window.getEl("arc_path"),window.objArcProps.targetleftwrapper=window.getEl("arc_path_left_wrapper"),window.objArcProps.targetleftnode=window.getEl("arc_path_left")}},objSliders={state:{visible:null,tweening:null},el:{wrapper:null,innerwrapper:null,slidersales:null,slidergreensales:null},vars:{data:null,content:null,slidersalesvalue:0,slidergreensalesvalue:0,livesimprovedcurrent:0,simulatorsampling:!1,debug:!1,updatetrendgraph:!0,updatecurrent:!1,usebiliniarinterpolation:!0,debugstring:"",recalculatecounter:0,setupsimulator:!0},calculatefloorceil:function(e,t){var a=0,o=0,n=Math.round(e/t)*t;return e>=0?e%t>t/2?(o=n,a=o-t):(a=n,o=a+t):Math.abs(e%t)>t/2||e%t==0?(a=n,o=a+t):(o=n,a=o-t),{floor:a,ceil:o}},start:function(){var e=this;"PD0900"==objPageState.state.filter.sector?objSliders.el.slidergreensales.parentNode.style.visibility="hidden":objSliders.el.slidergreensales.parentNode.style.visibility="visible";var t={fulldomain:location.protocol+"//"+location.hostname,method:"getlivesimprovedcachedata",type:"json",oru:objPageState.state.filter.oru,mru:objPageState.state.filter.mru,snapshotid:objConfig.currentsnapshotid,token:objLogin.token};e.recalculatecounter=0,psv("GET",objConfig.urls.dynamicresourceurl,t,e.getsimulatordatahandler)},getsimulatordatahandler:function(e,t){var a=objSliders;e?objError.handleError("objSliders.start",e):t.hasOwnProperty("authenticated")&&!t.authenticated?handleShibbolethLoginRequired():hasProperty(t,"error")?objError.show(t.error.message,!0):(a.vars.setupsimulator=t.hasOwnProperty("sales")&&t.hasOwnProperty("greensales")&&t.hasOwnProperty("scenario"),a.vars.data=t,app.trendgraph.predictionlabel=a.vars.data.layout.simulatorlabel,app.trendgraph.predictiondate=a.vars.data.layout.simulatordate,app.trendgraph.stylecurrentline=a.vars.data.layout.simulatorstyle,a.vars.setupsimulator&&(getEl("simulation_header").innerHTML=a.vars.data.layout.simulatorlabel+app.labels.simulatortitle,a.el.errorwrapper.style.display="none"),a.vars.setupsimulator&&a.setupsimulator(),a.setuphistorygraph())},setuphistorygraph:function(){var e,t=this,a=t.vars.data.historicaldata,o={points:[],ymin:null,ymax:null},n="",i="",r=0,l=-1e12,s=1e12,d=/(\d{4})-(\d{2})-(\d{2})/;a.sort(function(e,t){return new Date(e.dateend)-new Date(t.dateend)});for(var p=0;p<a.length;p++){var u=a[p].l;if(u==-1&&(u=0),e=d.exec(a[p].dateend),o.points.push({value:objMap.roundlivesimproveddataobject({l:u,g:-1,p:-1}).displayl,label:a[p].name,dateend:a[p].dateend,utcend:Date.UTC(+e[1],+e[2]-1,+e[3])}),p==a.length-1){var w=new Date(a[p].dateend);n=""!=app.trendgraph.predictionlabel?app.trendgraph.predictionlabel:"Q4 "+(w.getMonth()+1==12?w.getFullYear()+1:w.getFullYear()),i=""!=app.trendgraph.predictiondate?app.trendgraph.predictiondate:(w.getMonth()+1==12?w.getFullYear()+1:w.getFullYear())+"-12-31",e=d.exec(i),r=Date.UTC(+e[1],+e[2]-1,+e[3])}u>l&&(l=u),u<s&&(s=u)}if(t.vars.setupsimulator&&t.vars.data.livesimproved.s0g0){o.points.push({value:objMap.roundlivesimproveddataobject({l:t.vars.data.livesimproved.s0g0,g:-1,p:-1}).displayl,label:n,dateend:i,utcend:r}),t.vars.data.livesimproved.s0g0>l&&(l=t.vars.data.livesimproved.s0g0),t.vars.data.livesimproved.s0g0<s&&(s=t.vars.data.livesimproved.s0g0);var c="s"+(t.vars.data.scenario.salesmin+"").replace(/\-/,"minus")+"g"+(t.vars.data.scenario.greensalesmin+"").replace(/\-/,"minus"),g="s"+(t.vars.data.scenario.salesmax+"").replace(/\-/,"minus")+"g"+(t.vars.data.scenario.greensalesmax+"").replace(/\-/,"minus"),b=t.vars.data.livesimproved[g],f=t.vars.data.livesimproved[c];b>l&&(l=b),f>=0&&f<s&&(s=f)}if(o.ymin=parseFloat(objMap.roundlivesimproveddataobject({l:s,g:-1,p:-1}).displayl.replace(/,/,"")),o.ymax=parseFloat(objMap.roundlivesimproveddataobject({l:l,g:-1,p:-1}).displayl.replace(/,/,"")),objTrendGraph.props.axis.ygridlines=3,o.ymax<.1&&(objTrendGraph.props.axis.ygridlines=null),null!=app.trendgraph.pointsvisible&&o.points.length>app.trendgraph.pointsvisible)for(var p=0;p<o.points.length-app.trendgraph.pointsvisible+1;p++)o.points.shift();o.styles={},o.styles.stylecurrentline=app.trendgraph.stylecurrentline,objTrendGraph.props.line.lastsegment.class="lastsegment",objTrendGraph.props.line.lastpoint.id="lp",objTrendGraph.reset(),objTrendGraph.drawgraph(o)},setupsimulator:function(){var e=this;e.el.slidersales.value=0,e.el.slidergreensales.value=0,e.el.slidersaleslabel.innerHTML="0%",null!=objRegionInfo.el.wrapper&&(objRegionInfo.el.wrapper.className=""),e.vars.slidersalesvalue=0;var t=objPageState.state.filter.mru+"_"+objPageState.state.filter.oru,a=objMap.data[t].l;e.vars.livesimprovedcurrent=a,e.vars.gsp=objMap.data[t].gsp==-1?0:Math.round(100*objMap.data[t].gsp),e.vars.gspslidermin=e.vars.gsp- -e.vars.data.scenario.greensalesmin<0?0:e.vars.gsp- -e.vars.data.scenario.greensalesmin,e.vars.gspslidermax=e.vars.gsp+e.vars.data.scenario.greensalesmax>100?100:e.vars.gsp+e.vars.data.scenario.greensalesmax,e.vars.greensalesmin=e.vars.gsp- -e.vars.data.scenario.greensalesmin<0?e.vars.gsp:e.vars.data.scenario.greensalesmin,e.vars.greensalesmax=e.vars.gsp+e.vars.data.scenario.greensalesmax>100?100-e.vars.gsp:e.vars.data.scenario.greensalesmax,e.vars.salesmax=e.vars.data.scenario.salesmax,e.vars.salesmin=e.vars.data.scenario.salesmin,e.el.slidergreensaleslabel.innerHTML=e.vars.gsp+"%",e.vars.slidergreensalesvalue=e.vars.gsp,e.el.slidergreensales.value=0,e.el.salesmin.innerHTML=e.vars.data.scenario.salesmin,e.el.salesmax.innerHTML=e.vars.data.scenario.salesmax,e.el.greensalesmin.innerHTML=e.vars.gspslidermin,e.el.greensalesmax.innerHTML=e.vars.gspslidermax,e.el.slidersales.setAttribute("min",e.vars.data.scenario.salesmin),e.el.slidersales.setAttribute("max",e.vars.data.scenario.salesmax),e.el.slidergreensales.setAttribute("min",e.vars.gspslidermin-e.vars.gsp),e.el.slidergreensales.setAttribute("max",e.vars.gspslidermax-e.vars.gsp);var o=Math.abs(e.vars.data.scenario.salesmin)/(Math.abs(e.vars.data.scenario.salesmin)+e.vars.salesmax)*100-2,n=(e.vars.gsp-e.vars.gspslidermin)/(e.vars.gspslidermax-e.vars.gspslidermin)*100-3;getEl("saleszero").style.left=o+"%",getEl("greensaleszero").style.left=n+"%",e.el.greensaleszero.innerHTML=e.vars.gsp,e.el.greensaleszero.style.display=n>85||0==e.vars.gsp?"none":"inline",e.vars.simulatorsampling=!0,e.executeslidersampling()},executeslidersampling:function(){var e=this,t=e.el.slidersales.value,a=e.el.slidergreensales.value;t==e.vars.slidersalesvalue&&a==e.vars.slidergreensalesvalue||(e.calculatevalue(t,a),1==e.recalculatecounter&&objAnalytics.data.events.push({category:"simulator",action:"slide",label:"simulator change"}),e.recalculatecounter++),e.vars.slidersalesvalue=Math.round(10*t)/10,e.vars.slidergreensalesvalue=Math.round(10*a)/10,e.vars.simulatorsampling&&(e.vars.timersimulator=setTimeout(function(){e.executeslidersampling()},100))},calculatevalue:function(e,t){var a=this;e=parseFloat(e,10),t=parseFloat(t,10),a.el.slidersaleslabel.innerHTML=(e>0?"+":"")+Math.round(10*e)/10+"%",a.el.slidergreensaleslabel.innerHTML=Math.round(10*(t+a.vars.gsp))/10+"%";var o=0;if(a.vars.usebiliniarinterpolation){var n=0,i=0,r=0,l=0,s={},d=0,p=0,p=0,u=0,w="",c=0,g=0;e==a.vars.salesmax&&(e-=1e-4),t==a.vars.greensalesmax&&(t-=1e-4),a.vars.debug&&(a.vars.debugstring=""),s=a.calculatefloorceil(e,a.vars.data.scenario.salesstep),n=s.floor,i=s.ceil,s=a.calculatefloorceil(t,a.vars.data.scenario.greensalesstep),r=s.floor,l=s.ceil,a.vars.debug&&(a.vars.debugstring+="- sfloor="+n+"<br/>- sceil="+i+"<br/>- gsfloor="+r+"<br/>- gsceil="+l+"<br/>"),w="s"+(n+"").replace(/-/,"minus")+"g"+(r+"").replace(/-/,"minus"),d=a.vars.data.livesimproved[w],a.vars.debug&&(a.vars.debugstring+="- q11 key="+w+", value="+d+"<br/>"),w="s"+(i+"").replace(/-/,"minus")+"g"+(r+"").replace(/-/,"minus"),p=a.vars.data.livesimproved[w],a.vars.debug&&(a.vars.debugstring+="- q21 key="+w+", value="+p+"<br/>"),w="s"+(n+"").replace(/-/,"minus")+"g"+(l+"").replace(/-/,"minus"),q12=a.vars.data.livesimproved[w],a.vars.debug&&(a.vars.debugstring+="- q12 key="+w+", value="+q12+"<br/>"),w="s"+(i+"").replace(/-/,"minus")+"g"+(l+"").replace(/-/,"minus"),u=a.vars.data.livesimproved[w],a.vars.debug&&(a.vars.debugstring+="- q22 key="+w+", value="+u+"<br/>"),c=(i-e)/(i-n)*d+(e-n)/(i-n)*p,g=(i-e)/(i-n)*q12+(e-n)/(i-n)*u,o=(l-t)/(l-r)*c+(t-r)/(l-r)*g,a.vars.debug&&(null==getEl("debug")||(getEl("debug").innerHTML=a.vars.debugstring),a.vars.debugstring="")}if(0==isNaN(o)){var b=objMap.data[objPageState.state.filter.mru+"_"+objPageState.state.filter.oru].p,f=Math.round(o/b*100);a.vars.updatecurrent&&(a.el.livesimprovednumber.innerHTML=objMap.roundlivesimproveddataobject({l:o,g:-1,p:-1}).displayl.replace(/,/,""),a.el.livesimprovedpercentage.textContent=f+"%",applyInfographicDelta(360*f/100),o>a.vars.livesimprovedcurrent?objRegionInfo.el.wrapper.setAttribute("class","more"):o<a.vars.livesimprovedcurrent?objRegionInfo.el.wrapper.setAttribute("class","less"):objRegionInfo.el.wrapper.setAttribute("class","equal")),a.vars.updatetrendgraph&&objTrendGraph.updatelastpointingraph(parseFloat(objMap.roundlivesimproveddataobject({l:o,g:-1,p:-1}).displayl.replace(/,/,"")))}},togglesimulator:function(e){var t=this;t.vars.setupsimulator=e,t.el.innerwrapper.style.display=e?"block":"none"},init:function(){var e=this;e.state.visible=!1,e.state.tweening=!1,e.el.wrapper=getEl("simulation"),e.el.innerwrapper=getEl("simulation_wrapper"),e.el.errorwrapper=getEl("simulation_error_wrapper"),e.el.slidersales=getEl("slidersales"),e.el.slidergreensales=getEl("slidergreensales"),e.el.slidersaleslabel=getEl("value_sales"),e.el.slidergreensaleslabel=getEl("value_green_sales"),e.el.livesimprovednumber=getEl("nr_lives_improved"),e.el.livesimprovedpercentage=getEl("lives_improved_percentage"),e.el.history=getEl("region_history"),e.el.salesmin=getEl("salesmin"),e.el.salesmax=getEl("salesmax"),e.el.greensalesmin=getEl("greensalesmin"),e.el.greensalesmax=getEl("greensalesmax"),e.el.saleszero=getEl("saleszero"),e.el.greensaleszero=getEl("greensaleszero"),getEl("simulation_header").innerHTML=app.labels.simulatortitle,e.vars.content=e.el.wrapper.innerHTML}},objLogin={token:null,role:"",state:{visible:null,tweening:null,usernamedisabled:null,passworddisabled:null,authenticating:null,messages:[]},vars:{},el:{wrapper:null,submit:null},btnsubmitclick:function(){var e=window.objConfig.urls.hasOwnProperty("urlshiblogin")?window.objConfig.urls.urlshiblogin:"https://www.livesimproved.philips.com/tools/shibboleth-authenticate.aspx";location.href=e+"?rnd="+Math.random()},findlatestsnapshotid:function(e){window.objConfig.snapshots=e.snapshotconfig;var t=new Date("1970-01-01"),a="";if(null!=window.objConfig.snapshots)for(var o=0;o<window.objConfig.snapshots.length;o++){var n=window.objConfig.snapshots[o],i=new Date(n.dateend);i-t>0&&(a=n.snapshotid,t=new Date(n.dateend))}window.objConfig.currentsnapshotid=a},getsnapshotconfig:function(){var e=this,t={type:"json",fulldomain:location.protocol+"//"+location.hostname,method:"getsnapshotdetailssimple",token:objLogin.token};window.psv("GET",window.objConfig.urls.authurl2,t,function(t,a){t||window.hasProperty(a,"error")?window.hasProperty(a,"error")?window.objError.show("There was an error retrieving snapshot information. "+("object"==typeof a?JSON.stringify(a):a),!0):window.objError.show("There was an error retrieving snapshot information. "+("object"==typeof t?JSON.stringify(t):t),!0):"undefined"==typeof a||"string"==typeof a||null===a?(window.objError.show("There was an error retrieving snapshot information. No data was received...",!0),window.handleShibbolethLoginRequired()):a.hasOwnProperty("authenticated")&&!a.authenticated?window.handleShibbolethLoginRequired():(e.findlatestsnapshotid(a),e.checkappconfigforupdates(a),window.isPublicSite()?(objLogin.token=window.generateUniqueId().replace(/x/g,""),e.continueretrievemetadata()):e.checksession())})},checksession:function(){var e={fulldomain:location.protocol+"//"+location.hostname,method:"checksession",type:"json"};window.psv("GET",window.objConfig.urls.authurl2,e,function(e,t){e||window.hasProperty(t,"error")?window.hasProperty(t,"error")?window.objError.show("There was an error retrieving session information. "+("object"==typeof t?JSON.stringify(t):t),!0):window.objError.show("There was an error retrieving session information. "+("object"==typeof e?JSON.stringify(e):e),!0):t.authenticated?(objLogin.token=t.token,objLogin.continueretrievemetadata()):window.handleShibbolethLoginRequired()})},continueretrievemetadata:function(){window.isPublicSite()||(window.app.defaultpagestate.view="worldmap"),window.app.retrievemetadata()},checksnapshotconfigforupdates:function(e){var t=this,a=window.objStore.getlocalstorageitem("snapshotconfig"),o=e.snapshotconfig;if(a){a=JSON.parse(a).snapshotconfig;for(var n=0;n<o.length;n++){for(var i=!1,r=0;r<a.length;r++)if(o[n].snapshotid===a[r].snapshotid&&(i=!0,o[n].lastmodified!==a[r].lastmodified)){t.state.messages.push('There is updated data for "'+o[n].name+'".');break}i||t.state.messages.push('A new data set "'+o[n].name+'" has been added.')}}window.objStore.setlocalstorageitem("snapshotconfig",JSON.stringify(e))},checkappconfigforupdates:function(e){var t=this,a=window.objStore.getlocalstorageitem("appconfig"),o=e.appinfo,n="";window.app.state.mobile?(n="<b>New release available</b><p>A new version ("+(window.app.state.ios?o.iosid:o.androidid)+") of the Lives Improved app is available.</p>",n+='<p>Please visit the <span class="mimiclink" onclick="loadUrlInBrowser(\'https://www.livesimproved.philips.com/download\', true)">Lives Improved website</span> to download and install this new version.</p>',n+="<p>Details:</p>",a&&(a=JSON.parse(a),window.app.state.ios?a.iosid!==o.iosid&&(t.state.messages.push(n),t.state.messages.push(o.iosdescription)):a.androidid!==o.androidid&&(t.state.messages.push(n),t.state.messages.push(o.andrioddescription)))):(n="<b>The Lives Improved website has updated</b>",n+="<p>Details:</p>",a=a?JSON.parse(a):null,a?a.iosid!==o.iosid&&(t.state.messages.push(n),t.state.messages.push(o.iosdescription)):(t.state.messages.push(n),t.state.messages.push(o.iosdescription))),window.objStore.setlocalstorageitem("appconfig",JSON.stringify(e.appinfo))},hide:function(){var e=this;e.state.tweening=!0,window.app.state.ios?(e.el.wrapper.style.display="none",e.state.tweening=!1,e.state.visible=!1):window.TweenLite.to(e.el.wrapper,.3,{opacity:0,onComplete:function(){e.el.wrapper.style.display="none",e.state.tweening=!1,e.state.visible=!1}})},show:function(){var e=this;window.objSliders.vars.simulatorsampling=!1,e.el.wrapper.style.display="block",e.state.tweening=!0,window.app.state.ios?(e.el.wrapper.style.opacity=1,e.state.tweening=!1,e.state.visible=!0,location.href=window.objConfig.urls.urlshiblogin+"?rnd="+Math.random()):window.TweenLite.to(e.el.wrapper,.3,{opacity:1,onComplete:function(){e.state.tweening=!1,e.state.visible=!0,location.href=window.objConfig.urls.urlshiblogin+"?rnd="+Math.random()}})},logout:function(){window.objStore.removelocalstorageitem("token"),window.objPageState.updatepagestate({view:"login"})},showupdatemessages:function(){var e=this;if(window.getEl("messagelist").innerHTML="",e.state.messages.length>0){for(var t=0;t<e.state.messages.length;t++)window.getEl("messagelist").innerHTML+="<li>"+e.state.messages[t]+"</li>";e.state.messages=[],e.showmessages()}},hidemessages:function(){var e=this;e.state.tweening=!0,window.TweenLite.to(e.el.messagespanel,.3,{opacity:0,onComplete:function(){window.objOverlay.hide(),e.el.messagespanel.style.display="none",e.state.tweening=!1,e.state.visible=!1}})},showmessages:function(){var e=this;window.objOverlay.show(),e.state.tweening=!0,e.el.messagespanel.style.display="block",window.TweenLite.to(e.el.messagespanel,.3,{opacity:1,onComplete:function(){e.state.tweening=!1,e.state.visible=!0}})},init:function(){var e=this;e.state.passworddisabled=!1,e.state.usernamedisabled=!1,e.state.authenticating=!1,e.el.wrapper=window.getEl("login_panel"),e.el.submit=window.getEl("btn_submit"),e.el.messagespanel=window.getEl("messages_panel"),e.token=window.objStore.getlocalstorageitem("token")}},objError={state:{visible:null,tweening:null},el:{wrapper:null,text:null},hide:function(){var e=this;e.el.wrapper.innerHTML="",e.state.tweening=!0,TweenLite.to(e.el.wrapper,.3,{height:0,onComplete:function(){e.state.tweening=!1,e.state.visible=!1}})},show:function(e,t){var a=this;a.el.wrapper.innerHTML=e,a.state.tweening=!0,TweenLite.to(a.el.wrapper,.3,{height:50,onComplete:function(){if(a.state.tweening=!1,a.state.visible=!0,t){setTimeout(function(){a.hide()},4e3)}}})},handleError:function(e,t){var a=this;objLoading.state.visible&&objLoading.hide(),objOverlay.state.visible&&objOverlay.hide(),t.message&&(t=t.message),t.line?a.show("JS Error: line="+t.line+", message="+t.message+", stack="+t.stack,!0):"string"==typeof t?"token mismatch"==t.toLowerCase()||"not authenticated"==t.toLowerCase()?objLogin.show():a.show(t,!0):a.show(JSON.stringify(t),!0)},init:function(){var e=this;e.state.visible=!1,e.state.tweening=!1,e.el.wrapper=getEl("error")}},objFilter={state:{visible:null,tweening:null,currentfilterhtml:""},el:{wrapper:null,filtercontent:null},show:function(){var e=this;e.state.currentfilterhtml=e.el.filtercontent.innerHTML,window.isPublicSite()||window.objOverlay.show(),e.state.tweening||(e.state.tweening=!0,e.el.wrapper.style.display="block",window.TweenLite.to(e.el.wrapper,.3,{opacity:1,onComplete:e.showcomplete})),window.objMruFilter.setmrufilterstate(),window.objOruFilter.setorufilterstate();var t=!0;t||window.isPublicSite()||(window.objPanelInfo.show("filter"),window.objStore.setlocalstorageitem("seenFilterIntro","true"))},showcomplete:function(){objFilter.state.tweening=!1,objFilter.state.visible=!0},hide:function(){var e=this;e.state.tweening||(e.state.tweening=!0,window.TweenLite.to(e.el.wrapper,.3,{opacity:0,onComplete:function(){window.isPublicSite()||window.objOverlay.hide(),e.el.filtercontent.innerHTML=e.state.currentfilterhtml,e.el.wrapper.style.display="none",e.state.tweening=!1,e.state.visible=!1,e.el.btnapply.style.display="none"}}))},blink:function(){var e=this;window.isPublicSite()?e.blinkcomplete():window.TweenLite.to(e.el.filtercontent,.2,{opacity:.5,onComplete:function(){e.el.loader.style.display="block",window.TweenLite.to(e.el.filtercontent,.4,{opacity:1,onComplete:e.blinkcomplete})}})},blinkcomplete:function(){objFilter.el.loader.style.display="none",objFilter.el.btnapply.style.display="block"},applyfilter:function(e){var t=this;window.isPublicSite()||!t.state.visible||t.state.tweening||t.hide();var a=window.objOruFilter.retrieveselectedorulevel();t.state.currentfilterhtml=t.el.filtercontent.innerHTML,t.el.btnapply.style.display="none";var o=window.objOruFilter.state.selectedoruguid;"boolean"==typeof e&&e&&(o="none");var n="worldmap";"none"===o&&"1"!==a||(n="detail");var i=window.objDataFilter.state.filter.subtype;if(a!==window.objPageState.state.filter.orulevel&&"all"!==window.objDataFilter.state.filter.subtype&&"lives_improved"!==window.objDataFilter.state.filter.datasource){var r=window.objMap.createdatatypelistforregions(a)[window.objDataFilter.state.filter.datasource];r.indexOf(i)===-1&&(i="all")}a!==window.objPageState.state.filter.orulevel&&"1"===a&&(n="detail",o="world"),window.isPublicSite()?window.objPageState.updatepagestate({view:n,filter:{datasource:window.objDataFilter.state.filter.datasource,subtype:i,orulevel:a,oru:o,sector:window.objMruFilter.state.selectedsector,mru:window.objMruFilter.state.selectedmru}}):window.objPageState.updatepagestate({view:"worldmap",filter:{datasource:window.objDataFilter.state.filter.datasource,subtype:window.objDataFilter.state.filter.subtype,orulevel:window.objOruFilter.retrieveselectedorulevel(),oru:"none",sector:window.objMruFilter.state.selectedsector,mru:window.objMruFilter.state.selectedmru}}),window.isPublicSite()||window.objRegionInfo.state.visible&&!window.objRegionInfo.state.tweening&&window.objRegionInfo.hide()},init:function(){var e=this;e.state.visible=!1,e.state.tweening=!1,e.el.wrapper=window.getEl("filter_panel"),e.el.loader=window.getEl("filter_loader"),e.el.filtercontent=window.Sizzle("#filter_panel div.modal_content")[0],e.el.btnapply=window.getEl("btn_apply_filter"),e.el.btnapply.style.display="none",e.state.currentfilterhtml=e.el.filtercontent.innerHTML}},objBookmarks={state:{visible:null,tweening:null},el:{wrapper:null},isfavourite:function(){var e="fav_"+objPageState.state.filter.orulevel+"_"+objPageState.state.filter.mru+"_"+objPageState.state.filter.oru,t=objStore.getlocalstorageitem(e);return null!=t},addbookmark:function(){},removefavourite:function(e,t){e.stopPropagation();var a=t.parentNode,o=a.getAttribute("data-key");return objStore.removelocalstorageitem("fav_"+o),TweenLite.to(a,.2,{left:"100%",delay:0,onComplete:function(){TweenLite.to(a,.3,{height:0,delay:0,onComplete:function(){return a.parentNode.removeChild(a),!1}})}}),!1},findfavourites:function(){var e=[];if(objStore.vars.uselocalstorage)for(var t=0;t<objStore.store.length;t++){var a=localStorage.key(t);a.indexOf("fav_")>-1&&e.push(objStore.store.getItem(a))}return e},renderfavouritepanel:function(){for(var e=this,t='<div style="padding: 10px">Use the heart icon to add your favourite combinations to this bookmark list.</div>',a=e.findfavourites(),o=document.createElement("ul"),n=0;n<a.length;n++){var i=JSON.parse(a[n]),r=objMruFilter.getsectorfrombreadcrumb(i.breadcrumb),l=document.createElement("li");l.setAttribute("data-oru",i.oru),l.setAttribute("data-mru",i.mru),l.setAttribute("data-region",i.region_id),l.setAttribute("data-sector",r);var s=i.oru+"_"+i.mru+"_"+(4!=i.oru?i.region_id.toLowerCase():i.region_id);l.setAttribute("data-key",s),l.innerHTML='<div class="bookmark_color" style="background:'+objConfig.colors[r].middle+'"></div><h2>'+i.region_name+'</h2><span class="bookmark_sub">'+i.breadcrumb+'</span><div class="remove_bookmark" onclick="objBookmarks.removefavourite(event, this);return false;"></div>',l.onclick=function(){e.openfavourite(this.getAttribute("data-oru"),this.getAttribute("data-mru"),this.getAttribute("data-region"),this.getAttribute("data-sector"))},o.appendChild(l)}e.el.list.innerHTML="",0==a.length?e.el.list.innerHTML=t:e.el.list.appendChild(o)},openfavourite:function(e,t,a,o){var n=this;objOruFilter.state.selectedoru=e,objMruFilter.state.selectedmru=t,objMruFilter.state.selectedsector=o,objOruFilter.settocurrentoru(),objPageState.updatepagestate({view:"detail",filter:{orulevel:e,oru:a,sector:o,mru:t}}),n.hide()},show:function(){var e=this;objOverlay.show(),e.state.tweening=!0,e.el.wrapper.style.display="block",TweenLite.to(e.el.wrapper,.3,{opacity:1,onComplete:function(){e.state.tweening=!1,e.state.visible=!0}})},hide:function(){var e=this;e.state.tweening=!0,TweenLite.to(e.el.wrapper,.3,{opacity:0,onComplete:function(){objOverlay.hide(),e.el.wrapper.style.display="none",e.state.tweening=!1,e.state.visible=!1}})},init:function(){var e=this;e.state.visible=!1,e.state.tweening=!1,e.el.wrapper=getEl("bookmarks_panel"),e.el.list=getEl("bookmarkslist"),e.renderfavouritepanel()}},objExplain={state:{visible:null,tweening:null,contentloaded:!1},el:{wrapper:null,content:null},show:function(){var e=this;objOverlay.show(),e.state.tweening=!0,e.el.wrapper.style.display="block",TweenLite.to(e.el.wrapper,.3,{opacity:1,onComplete:function(){e.state.tweening=!1,e.state.visible=!0,e.state.contentloaded||serverSideRequest({url:objConfig.urls.base+"/data/faq.html"+(location.href.indexOf("http")>-1?"?rnd="+window.pageVars.version:""),method:"get",
debug:!1,callback:function(t,a){e.el.content.innerHTML=a,e.state.contentloaded=!0}})}})},hide:function(){var e=this;e.state.tweening=!0,TweenLite.to(e.el.wrapper,.3,{opacity:0,onComplete:function(){objOverlay.hide(),e.el.wrapper.style.display="none",e.state.tweening=!1,e.state.visible=!1}})},showfaqcontent:function(e,t){for(var a=Sizzle("#explain_content div.selected"),o=0;o<a.length;o++)a[o].className=a[o].className.replace(" selected","");e.className+=" selected",getEl(t).className+=" selected"},init:function(){var e=this;e.state.visible=!1,e.state.tweening=!1,e.el.wrapper=getEl("explain_panel"),e.el.content=getEl("explain_content")}},objTrendGraph={state:{valuepopupopen:!1,trendpopupflipped:!1},vars:{popuptrendwidth:0,popuptrendheight:0,popuptrendtextwrapperheight:0,popupvaluewidth:0,popupvalueheight:0,data:null,template:null},el:{root:null,lastsegment:null,lastpoint:null,popuptrend:null,popuptrendbase:null,popuptrendnumber:null,popuptrendtextwrapper:null,popupvalue:null,popupvaluenumber:null},props:{width:640,height:300,padding:{top:60,bottom:40,left:45,right:45},axis:{ymin:4,ymax:15,ystep:2.5,ygridlines:null,ygridlinesfullwidth:!0,showxlines:!1,xlinelength:8,showylines:!1,ylinelength:8,ylabelinset:!0,xpaddingleft:35,xpaddingright:10,ypaddingtop:20,ypaddingbottom:20},labels:{x:{padding:{bottom:20}},y:{translate:{x:0,y:8}}},coordinatepoint:{radius:5},title:{text:"Trend"},line:{lastsegment:{id:"last_segment",class:"last"},lastpoint:{id:"last_point",class:"last"}}},getsvgcoordinatesforpointflex:function(e,t){var a=this,o=a.props.height-a.props.padding.top-a.props.padding.bottom-a.props.axis.ypaddingtop-a.props.axis.ypaddingbottom,n=a.props.axis.ymax-a.props.axis.ymin,i=a.props.width-a.props.padding.left-a.props.padding.right-a.props.axis.xpaddingleft-a.props.axis.xpaddingright,r=a.vars.data.points[a.vars.data.points.length-1].utcend-a.vars.data.points[0].utcend;return 0==n&&(n=.001),isNaN(e)&&(e=parseFloat((e+"").replace(/,/,""))),{x:a.props.padding.left+a.props.axis.xpaddingleft+i/r*(t-a.vars.data.points[0].utcend),y:a.props.padding.top+(o-o/n*(e-a.props.axis.ymin))+a.props.axis.ypaddingtop}},createcoordinatepoint:function(e,t,a,o){for(var n=this,i=0;i<2;i++){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttributeNS(null,"cx",t.x+""),r.setAttributeNS(null,"cy",t.y+""),r.setAttributeNS(null,"r",0==i?30:n.props.coordinatepoint.radius),r.setAttributeNS(null,"data-value",n.correctlabeldecimals(a.value+"",n.props.axis.ymax+"")),r.setAttributeNS(null,"data-label",a.label),r.setAttributeNS(null,"class",0==i?"hitarea":"point"),""!=o?1==i&&r.setAttributeNS(null,"id",o):r.setAttributeNS(null,"onclick","objTrendGraph.showvaluepopup({show: true, x: "+t.x+", y: "+(t.y-8)+", value: '"+a.value+"', label: '"+a.label+"'})"),e.appendChild(r)}},createlabel:function(e,t,a,o){var n=this,i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttributeNS(null,"x",t.x+""),i.setAttributeNS(null,"y",t.y+""),"y"==o&&n.props.labels.y.translate&&i.setAttributeNS(null,"transform","translate("+n.props.labels.y.translate.x+", "+n.props.labels.y.translate.y+")");var r=document.createTextNode(a.label);i.appendChild(r),e.appendChild(i)},setsvglinecoordinates:function(e,t){e.setAttributeNS(null,"x1",t.x1),isNaN(t.y1)&&console.trace(t.y1),e.setAttributeNS(null,"y1",t.y1),e.setAttributeNS(null,"x2",t.x2),e.setAttributeNS(null,"y2",t.y2)},updatelastpointingraph:function(e){var t=this;if(null!=t.vars.data){var a=t.getsvgcoordinatesforpointflex(e,t.vars.data.points[t.vars.data.points.length-1].utcend);t.el.lastsegment.setAttributeNS(null,"x2",a.x),t.el.lastsegment.setAttributeNS(null,"y2",a.y),t.el.lastpoint.setAttributeNS(null,"cx",a.x),t.el.lastpoint.setAttributeNS(null,"cy",a.y),t.el.lastpoint.setAttributeNS(null,"data-value",e),t.positiontrendpopupandsetvalue(a,e)}},positiontrendpopupandsetvalue:function(e,t){var a=this;e.y+a.vars.popuptrendheight>=a.props.height-a.props.padding.bottom?a.fliptrendpopup("flipped"):a.fliptrendpopup("original");var o=a.el.popuptrend.getAttributeNS(null,"transform").replace(/^.*\)\s+(.*)$/,"$1");app.state.ie?a.el.popuptrend.setAttributeNS(null,"transform","translate("+(e.x-a.vars.popuptrendwidth+18)+", "+(e.y+(a.state.trendpopupflipped?-10:10))+") "):a.el.popuptrend.setAttributeNS(null,"transform","translate("+(e.x-a.vars.popuptrendwidth+18)+", "+(e.y+(a.state.trendpopupflipped?-10:10))+") "+o),a.el.popuptrendnumber.textContent=a.correctlabeldecimals(t+"",a.props.axis.ymax+"")},showvaluepopup:function(e){var t=this;e.show?(t.el.popupvalue.setAttributeNS(null,"transform","translate("+(e.x-t.vars.popupvaluewidth/2)+", "+(e.y-t.vars.popupvalueheight)+")"),t.el.popupvalue.setAttributeNS(null,"visibility","visible"),t.el.popupvaluenumber.textContent=e.value+""):t.el.popupvalue.setAttributeNS(null,"visibility","hidden")},decimalplaces:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},correctlabeldecimals:function(e,t){var a=!1,o=0;3==arguments.length&&(a=arguments[2]),t=t.replace(/,/,""),e=e.replace(/,/,""),t.indexOf(".")>-1&&(o=t.split(".")[1].length);var n=formatMoney(parseFloat(e),o,",",".","");return a&&n.indexOf(".")>-1&&(n=parseFloat(n).toFixed(n.split(".")[1].length-1)),n},fliptrendpopup:function(e){var t=this;"original"==e&&t.state.trendpopupflipped&&(t.el.popuptrendbase.removeAttributeNS(null,"transform"),t.el.popuptrendtextwrapper.removeAttributeNS(null,"transform"),t.state.trendpopupflipped=!1),"flipped"!=e||t.state.trendpopupflipped||(t.el.popuptrendbase.setAttributeNS(null,"transform","scale(1,-1)"),t.el.popuptrendtextwrapper.setAttributeNS(null,"transform","translate(0,-53)"),t.state.trendpopupflipped=!0)},reset:function(){var e=this,t=e.el.root.parentNode;t.removeChild(e.el.root),t.innerHTML=e.vars.template,e.init()},drawgraph:function(e){var t=this,a={},o={};e.points.sort(function(e,t){return e.utcend-t.utcend}),t.vars.data=e,t.props.axis.ylabelinset;var n=document.getElementById("graph_title");if(n.setAttributeNS(null,"x",t.props.padding.left+(t.props.axis.ylabelinset?0:2)),n.textContent=t.props.title.text,null==t.vars.data.ymax||null==t.vars.data.ymin){for(var i=-1e12,r=1e12,l=0;l<t.vars.data.points.length;l++)t.vars.data.points[l].value>i&&(i=t.vars.data.points[l].value),t.vars.data.points[l].value<r&&(r=t.vars.data.points[l].value);t.props.axis.ymin=r-1,t.props.axis.ymax=i+1}else t.props.axis.ymin=t.vars.data.ymin,t.props.axis.ymax=t.vars.data.ymax;t.el.root.setAttributeNS(null,"viewBox","0 0 "+t.props.width+" "+t.props.height),t.setsvglinecoordinates(document.getElementById("x_axisline"),{x1:t.props.padding.left,y1:t.props.height-t.props.padding.bottom,x2:t.props.width-t.props.padding.right,y2:t.props.height-t.props.padding.bottom}),t.setsvglinecoordinates(document.getElementById("y_axisline"),{x1:t.props.padding.left,y1:t.props.padding.top,x2:t.props.padding.left,y2:t.props.height-t.props.padding.bottom});for(var s=document.getElementById("data_point_wrapper"),l=0;l<t.vars.data.points.length;l++){a=t.vars.data.points[l],o=t.getsvgcoordinatesforpointflex(a.value,a.utcend);var d="";l==t.vars.data.points.length-1&&(d=t.props.line.lastpoint.id),t.createcoordinatepoint(s,o,a,d),l==t.vars.data.points.length-1&&t.positiontrendpopupandsetvalue(o,a.value)}for(var p=document.getElementById("line_wrapper"),l=0;l<t.vars.data.points.length;l++){var u={};if(l>0&&(u.x=o.x,u.y=o.y),a=t.vars.data.points[l],o=t.getsvgcoordinatesforpointflex(a.value,a.utcend),l>0){var w=document.createElementNS("http://www.w3.org/2000/svg","line");t.setsvglinecoordinates(w,{x1:u.x,y1:u.y,x2:o.x,y2:o.y}),l==t.vars.data.points.length-1&&(w.setAttributeNS(null,"class",t.props.line.lastsegment.class),w.setAttributeNS(null,"id",t.props.line.lastsegment.id)),l==t.vars.data.points.length-2&&(w.setAttributeNS(null,"class","current"),"undefined"!=typeof e.styles&&w.setAttributeNS(null,"style",e.styles.stylecurrentline)),p.appendChild(w)}}for(var c=document.getElementById("x_axislabel_wrapper"),l=0;l<t.vars.data.points.length;l++)if(a=t.vars.data.points[l],o=t.getsvgcoordinatesforpointflex(a.value,a.utcend),o.y=t.props.height-t.props.labels.x.padding.bottom,t.createlabel(c,o,a,"x"),t.props.axis.showxlines){var g=document.createElementNS("http://www.w3.org/2000/svg","line");t.setsvglinecoordinates(g,{x1:o.x,y1:t.props.padding.top+t.props.height-t.props.padding.top-t.props.padding.bottom,x2:o.x,y2:t.props.padding.top+t.props.height-t.props.padding.top-t.props.padding.bottom-t.props.axis.xlinelength}),c.appendChild(g)}var b=document.getElementById("y_axislabel_wrapper"),f=document.getElementById("grid_wrapper"),v=4,m=t.props.axis.ystep%1!==0,h=[];if(document.getElementById("wrapper").setAttributeNS(null,"class",t.props.axis.ylabelinset?"inset":"normal"),null==t.props.axis.ygridlines)for(var l=parseFloat(t.props.axis.ymin);l<=t.props.axis.ymax;l+=.1)l=Math.round(10*l)/10,l%t.props.axis.ystep==0&&h.push({value:l,label:m&&l%1===0?l+".0":l+"",utcend:t.vars.data.points[0].utcend});else{var y=t.decimalplaces(t.props.axis.ymax),j=1,x=1;(t.props.axis.ymax+"").length;switch(y){case 1:j=10,x=10;break;case 2:j=100,x=15;break;case 3:j=1e3,x=20;break;case 4:j=1e4,x=25}var _=(t.props.axis.ymax-t.props.axis.ymin)/100*x,S=Math.round((t.props.axis.ymax-_)*j)/j;h.push({value:S,label:t.correctlabeldecimals(S+"",t.props.axis.ymax+"",!0)});var P=Math.round((t.props.axis.ymin+_)*j)/j;h.push({value:P,label:t.correctlabeldecimals(P+"",t.props.axis.ymax+"",!0)});for(var E=(S-P)/(t.props.axis.ygridlines-1),l=2;l<t.props.axis.ygridlines;l++){var O=Math.round((P+E*(l-1))*j)/j;h.push({value:O,label:t.correctlabeldecimals(O+"",t.props.axis.ymax+"",!0),utcend:t.vars.data.points[0].utcend})}}for(var l=0;l<h.length;l++){if(a=h[l],o=t.getsvgcoordinatesforpointflex(a.value,a.utcend),o.x=t.props.padding.left+(t.props.axis.ylabelinset?3:-5),o.y=o.y+v,t.createlabel(b,o,a,"y"),o.y=o.y-v,o.x=t.props.padding.left,!t.props.axis.ylabelinset){var g=document.createElementNS("http://www.w3.org/2000/svg","line");t.setsvglinecoordinates(g,{x1:o.x,y1:o.y,x2:o.x+t.props.axis.ylinelength,y2:o.y}),b.appendChild(g)}var k=document.createElementNS("http://www.w3.org/2000/svg","line"),F=t.props.axis.ylabelinset?t.props.padding.left+t.props.axis.xpaddingleft-5:t.props.padding.left;t.props.axis.ygridlinesfullwidth&&(F=t.props.padding.left),t.setsvglinecoordinates(k,{x1:F,y1:o.y,x2:t.props.width-t.props.padding.right,y2:o.y}),f.appendChild(k)}t.el.lastsegment=document.getElementById(t.props.line.lastsegment.id),t.el.lastpoint=document.getElementById(t.props.line.lastpoint.id),"undefined"!=typeof objRegionInfo&&objRegionInfo.showhistory()},getbbox:function(){var e=this;try{0==e.vars.popuptrendwidth&&(e.el.toppanel.className="show",e.vars.popuptrendwidth=e.el.popuptrend.getBBox().width),0==e.vars.popuptrendheight&&(e.vars.popuptrendheight=e.el.popuptrend.getBBox().height),0==e.vars.popupvaluewidth&&(e.vars.popupvaluewidth=e.el.popupvalue.getBBox().width),0==e.vars.popupvalueheight&&(e.vars.popupvalueheight=e.el.popupvalue.getBBox().height),0==e.vars.popuptrendtextwrapperheight&&(e.vars.popuptrendtextwrapperheight=e.el.popuptrendtextwrapper.getBBox().height),0==e.vars.popuptrendwidth&&(e.el.toppanel.className="hide")}catch(e){console.trace()}},init:function(){var e=this;e.el.root=document.getElementById("graph"),e.el.popuptrend=document.getElementById("popup_trend"),e.el.popuptrendnumber=document.getElementById("popup_trend_number"),e.el.popupvalue=document.getElementById("popup_value"),e.el.popuptrendbase=document.getElementById("popup_trend_base"),e.el.popupvaluenumber=document.getElementById("popup_value_number"),e.el.popuptrendtextwrapper=document.getElementById("popup_trend_text_wrapper"),e.el.toppanel=getEl("top_panel"),isPublicSite()||e.getbbox();var t=new XMLSerializer;e.vars.template=t.serializeToString(e.el.root),e.state.trendpopupflipped=!1}},objLoading={state:{visible:null,tweening:null},vars:{animate:!1},el:{wrapper:null},show:function(e){var t=this;t.state.tweening=!0,t.el.wrapper&&(t.el.wrapper.style.display="block",(objOverlay.state.visible||0==objOverlay.state.visible&&1==objOverlay.state.tweening)&&0==objFilter.state.visible?objLoading.el.wrapper.style.background='url("./img/ajax-loader.gif") no-repeat':objLoading.el.wrapper.style.background='url("./img/ajax-loader_white.gif") no-repeat',app.state.ios?(t.el.wrapper.style.opacity=.7,t.state.visible=!0,t.state.tweening=!1,e&&e()):TweenLite.to(t.el.wrapper,.3,{opacity:.7,delay:0,onComplete:function(){t.state.visible=!0,t.state.tweening=!1,e&&e()}}))},hide:function(e){var t=this;t.state.tweening=!0,t.el.wrapper&&(app.state.ios?(t.el.wrapper.style.display="none",t.state.visible=!1,t.state.tweening=!1,e&&e()):TweenLite.to(t.el.wrapper,.3,{opacity:0,delay:0,onComplete:function(){t.el.wrapper.style.display="none",t.state.visible=!1,t.state.tweening=!1,e&&e()}}))},init:function(){var e=this;e.state.tweening=!1,e.state.visible=!1,e.el.wrapper=getEl("loading")}},objPanelInfo={state:{visible:null,tweening:null,contentloaded:!1},el:{wrapper:null,content:null},show:function(e){var t=this;t.getcontent(e,function(){t.state.tweening=!0,t.el.wrapper.style.display="block",window.TweenLite.to(t.el.wrapper,.3,{opacity:1,onComplete:function(){t.state.tweening=!1,t.state.visible=!0}})})},hide:function(){var e=this;e.state.tweening=!0,window.TweenLite.to(e.el.wrapper,.3,{opacity:0,onComplete:function(){e.el.wrapper.style.display="none",e.state.tweening=!1,e.state.visible=!1}})},getcontent:function(e,t){var a=this,o=e+"_intro.html";window.serverSideRequest({url:window.objConfig.urls.base+"/data/"+o+(location.href.indexOf("http")>-1?"?v="+window.pageVars.version:""),method:"get",debug:!1,callback:function(o,n){a.el.contentwrapper.className=e,a.el.content.innerHTML=n,t()}})},removelocalstorageitems:function(){window.objStore.removelocalstorageitem("seenAppIntro"),window.objStore.removelocalstorageitem("seenFilterIntro"),window.objStore.removelocalstorageitem("seenRegionInfoIntro"),location.reload()},init:function(){var e=this;e.state.visible=!1,e.state.tweening=!1,e.el.wrapper=window.getEl("panel_info_panel"),e.el.contentwrapper=window.getEl("content_wrapper"),e.el.content=window.getEl("panel_info_content")}},objMruFilter={state:{selectedmru:null,selectedsector:null,tweening:null},el:{mrufilter:null,tempmru:null},setmrufilterstate:function(){var e=this;e.state.selectedmru=window.objPageState.state.filter.mru,e.state.selectedsector=e.getmrufilteraxisarray(window.objPageState.state.filter.mru)[0].id,e.showlevel(e.state.selectedsector,e.state.selectedmru,!1)},getsectoridfromfilterhtml:function(){},getmrufilteraxisarray:function(e){var t="#filter_container #"+e,a=window.Sizzle(t)[0],o=[];if(a&&a.firstElementChild)for(o.push({id:a.id,name:a.firstElementChild.innerHTML});null!=a.parentNode&&"filter_list"!==a.parentNode.className;)a=a.parentNode,"li"===a.localName&&o.push({id:a.id,name:a.firstElementChild.innerHTML});else o.push({id:"philips",name:"Philips Group"});return o.reverse()},getsectorfrombreadcrumb:function(e){return e.indexOf("ealthcare")>-1?"PD0900":e.indexOf("ighting")>-1?"PD0100":e.indexOf("ifestyle")>-1||e.indexOf("ersonal")>-1?"PD0200":e.indexOf("onnected")>-1?"DHS003":e.indexOf("iagnosis")>-1?"DHS001":e.indexOf("oyal")>-1?"royalphilips":"philips"},getmrufilterbreadcrumb:function(){for(var e=this,t=e.getmrufilteraxisarray(window.objPageState.state.filter.mru),a=[],o=0;o<t.length;o++)a.push(t[o].name);return a.join(" &bull; ")},preparehtml:function(e){var t=this;t.el.tempmru.innerHTML=e,t.el.mrufilter=window.getEl("filter_container"),t.el.mrufilter.innerHTML=e,t.state.selectedsector=window.app.defaultpagestate.filter.sector},selectmru:function(e,t,a){var o=this;e&&e.stopPropagation(),o.showlevel(t,a)},showlevel:function(e,t){var a=this;a.state.selectedmru=t,a.state.selectedsector=e;for(var o=window.getEl(t),n=o.parentNode,i=window.getFirstLevelChildElements(n,"li"),r=window.getEl("filter_container").getElementsByTagName("li"),l=0;l<r.length;l++)r[l].className="";for(var s=0;s<i.length;s++){var d=i[s];if(d!==o)for(var p=d.getElementsByTagName("ul"),u=0;u<p.length;u++)2===arguments.length?window.TweenLite.to(p[u],.2,{height:0}):p[u].style.height="0px"}if(o.className="selected",2===arguments.length){var w=window.getFirstLevelChildElements(o,"ul");w.length>0&&window.TweenLite.to(w[0],.4,{height:"auto"})}else for(var c=a.getmrufilteraxisarray(window.objPageState.state.filter.mru),l=0;l<c.length;l++){var w=window.getFirstLevelChildElements(window.getEl(c[l].id),"ul");w.length>0&&(w[0].style.height="auto")}window.objHeader.setbreadcrumb(objMruFilter.getmrufilterbreadcrumb()),2===arguments.length&&window.objFilter.blink(),window.isPublicSite()&&window.objFilter.applyfilter()},init:function(e){var t=this;t.state.tweening=!1,t.state.selectedmru=window.app.defaultpagestate.filter.mru,t.state.selectedsector="philips",t.el.mrufilter=window.getEl("filter_container"),t.el.tempmru=window.getEl("producttree_temp")}},objOruFilter={json:null,listlevel1world:[],listlevel2region:[],listlevel3market:[],listlevel4country:[],state:{selectedoru:null,selectedoruguid:null},el:{mrufilter:null,wrapper:null},postprocessorudata:function(){var e=this;if(e.listlevel1world.push({guid:objOruFilter.json.unit.guid,parent:void 0}),"object"==typeof objOruFilter.json.unit.subunits)for(var t in objOruFilter.json.unit.subunits)if("string"==typeof t&&(e.listlevel2region.push({guid:objOruFilter.json.unit.subunits[t].guid,parent:objOruFilter.json.unit.guid}),"object"==typeof objOruFilter.json.unit.subunits[t].subunits))for(var a in objOruFilter.json.unit.subunits[t].subunits)if("string"==typeof a&&(e.listlevel3market.push({guid:objOruFilter.json.unit.subunits[t].subunits[a].guid,parent:objOruFilter.json.unit.subunits[t].guid}),"object"==typeof objOruFilter.json.unit.subunits[t].subunits[a].subunits))for(var o in objOruFilter.json.unit.subunits[t].subunits[a].subunits)"string"==typeof o&&e.listlevel3market.push({guid:objOruFilter.json.unit.subunits[t].subunits[a].subunits[o].guid,parent:objOruFilter.json.unit.subunits[t].subunits[a].guid})},retrieveoruarr:function(e){var t=parseInt("undefined"==typeof e?window.objPageState.state.filter.orulevel:e,10);switch(t){case 1:return window.objOruFilter.listlevel1world;case 2:return window.objOruFilter.listlevel2region;case 3:return window.objOruFilter.listlevel3market;case 4:return window.objOruFilter.listlevel4country;default:return window.objError.show("Unexpected level was passed ("+t+").",!0),[]}},setorufilterstate:function(){var e=this;e.state.selectedoru=window.objPageState.state.filter.orulevel;var t="btn_country";switch(window.objPageState.state.filter.orulevel){case"1":t="btn_world";break;case"2":t="btn_region";break;case"3":t="btn_bmc"}e.selectoru(window.getEl(t),window.objPageState.state.filter.orulevel,!1)},getregionnamebyid:function(e){var t=window.translateFragment(e);if(t.indexOf("[")>-1){var a=void 0;"cantral-east_europe"===e&&(a="central-east_europe"),"central-east_europe"===e&&(a="cantral-east_europe"),a&&(t=window.translateFragment(a))}return window.returnObj={},t},selectoru:function(e,t){var a=this;a.el.wrapper=window.getEl("oru_filter_container"),e.className="selected",a.state.selectedoru=t,window.objHeader.setbreadcrumb(window.objMruFilter.getmrufilterbreadcrumb()),2===arguments.length&&window.objFilter.blink(),window.objFilter.applyfilter(!0)},retrieveselectedorulevel:function(){return objOruFilter.state.selectedoru=objOruFilter.el.orulevelselect.options[objOruFilter.el.orulevelselect.selectedIndex].value,objOruFilter.state.selectedoru},settocurrentoru:function(){for(var e=this,t=e.el.wrapper.getElementsByTagName("option"),a=0;a<t.length;a++)t[a].getAttribute("value")===window.objPageState.state.filter.orulevel?t[a].setAttribute("selected","selected"):t[a].removeAttribute("selected")},rendermobilegeographylist:function(){var e=this,t=e.retrieveoruarr(),a='<ul class="c-region-list">';t.forEach(function(e){a+='<li class="mapselector" data-target="'+e.guid+'" onclick="countryClicked(\''+e.guid+"', true)\">"+window.translateFragment(e.guid)+"</li>"}),a+="</ul>",window.getEl("regions").innerHTML=a},setdatalevelattribute:function(e){window.getEl("body").setAttribute("data-orulevel","level"+(e?e:document.getElementsById("oru-select").selectedValue))},convertoruleveltomarket:function(e){switch(parseInt(e,10)){case 1:return"World";case 2:return"Region";case 3:return"Market";case 4:return"Country"}return""},init:function(e){var t=this;t.state.selectedoru=window.app.defaultpagestate.filter.orulevel,t.el.wrapper=window.getEl("oru_filter_container"),t.el.orulevelselect=window.getEl("oru-select"),objOruFilter.setdatalevelattribute(1)}},objDataFilter={el:{wrapper:""},vars:{subclicked:!1,timerid:null},state:{filter:{datasource:"lives_improved",subtype:""},subtype:{}},init:function(){var e=this;e.el.wrapper=window.getEl("map-tab_panels")},resetsubtypeindicators:function(e){for(var t=0;t<e.length;t++)e[t].innerText=window.translateFragment("all_data")},setactivetab:function(e){for(var t=objDataFilter.el.wrapper.getElementsByClassName("active-tab"),a=0;a<t.length;a++)t[a].removeAttribute("class");e.setAttribute("class","active-tab")},mapdatatypekeys:function(e){var t={value_co2:"c_o_2",value_fte:"number_of_employees",value_waste:"waste",value_water:"water",value_emissions:"emissions",value_emissionshaz:"emissionshaz",value_trc:"lwc_rate",value_wasterecycled:"recycled",value_sales:"number_sales",value_male:"percentage_male",value_female:"percentage_female",value_research:"r_and_d_centers",value_plants:"manufacturing_sites",value_assets:"number_assets",value_employees:"number_of_employees"};return t[e]?t[e]:e},renderdatasubtypefilters:function(){var e=this,t='<div class="bg"></div><ul><li class="datasubtype" data-subtype="all" onclick="objDataFilter.changesubtype(\'sustainability\', \'all\')">'+window.translateFragment("all_data")+"</li>";window.objMap.datatypes.sustainability.forEach(function(a){a.indexOf("value_")>-1&&(t+='<li class="datasubtype" data-subtype="'+a+"\" onclick=\"objDataFilter.changesubtype('sustainability', '"+a+"')\">"+window.translateFragment(e.mapdatatypekeys(a)).replace(/^(.*?)(\s*\(.*\))$/g,"$1")+"</li>")}),t+="</ul>",window.Sizzle("li[data-panel=sustainability] .datatype-filter")[0].innerHTML=t;var a='<div class="bg"></div><ul><li class="datasubtype" data-subtype="all" onclick="objDataFilter.changesubtype(\'global_presence\', \'all\')">'+window.translateFragment("all_data")+"</li>";window.objMap.datatypes.global_presence.forEach(function(t){t.indexOf("value_")>-1&&(a+='<li class="datasubtype" data-subtype="'+t+"\" onclick=\"objDataFilter.changesubtype('global_presence', '"+t+"')\">"+window.translateFragment(e.mapdatatypekeys(t)).replace(/^(.*?)(\s*\(.*\))$/g,"$1")+"</li>")}),a+="</ul>",window.Sizzle("li[data-panel=global_presence] .datatype-filter")[0].innerHTML=a},setdatasubtypefilter:function(e,t){for(var a=document.getElementsByClassName("datasubtype"),o=0;o<a.length;o++)a[o].setAttribute("class","datasubtype");var n=window.Sizzle("li[data-panel="+e+"] li[data-subtype="+t+"]");"undefined"!=typeof n&&n[0].setAttribute("class","datasubtype active")},changedatasource:function(e){objDataFilter.vars.subclicked||(objDataFilter.state.filter.datasource=e,objDataFilter.state.filter.subtype="all",window.objFilter.applyfilter())},changesubtype:function(e,t){objDataFilter.vars.subclicked=!0,objDataFilter.state.filter.datasource=e,objDataFilter.state.filter.subtype=t,window.objFilter.applyfilter(),objDataFilter.vars.timerid=setTimeout(function(){objDataFilter.vars.subclicked=!1},50)},datasourcechanged:function(e){var t=window.Sizzle("li[data-panel="+e+"]")[0];objDataFilter.setactivetab(t),objDataFilter.resetsubtypeindicators(objDataFilter.el.wrapper.getElementsByClassName("subtypeindicator")),window.getEl("body").removeAttribute("data-subtype"),"lives_improved"!==e&&window.objRegionInfo.setdetailspanel(e,"all"),"lives_improved"!==e&&objDataFilter.setdatasubtypefilter(e,"all")},subtypechanged:function(e,t){var a=window.Sizzle("li[data-panel="+e+"] li[data-subtype="+t+"]")[0],o=window.Sizzle("li[data-panel="+e+"]")[0];objDataFilter.setactivetab(o),objDataFilter.resetsubtypeindicators(objDataFilter.el.wrapper.getElementsByClassName("subtypeindicator")),o.getElementsByClassName("subtypeindicator")[0].innerHTML=a.innerHTML,window.getEl("body").setAttribute("data-subtype",t),"lives_improved"!==e&&window.objRegionInfo.setdetailspanel(e,t),"lives_improved"!==e&&objDataFilter.setdatasubtypefilter(e,t)}},app={state:{width:null,height:null,mobile:null,ios:!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),ios7:!!navigator.userAgent.match(/OS 7_/g),ipad:!!navigator.userAgent.match(/(iPad)/g),orientation:"",ie:!!window.MSStream,webbrowser:location.href.indexOf("http")>-1,initialmapview:!0,inframe:top===self},vars:{basehtml:null},defaultpagestate:{view:"detail",popup:"none",filter:{datasource:"lives_improved",subtype:"all",orulevel:"1",oru:"world",sector:"philips",mru:"philips"}},labels:{simulatortitle:" simulation"},trendgraph:{predictionlabel:"Q1 2014",predictiondate:"2014-03-31",pointsvisible:null,stylecurrentline:""},el:{outerwrapper:null},btnfilterclick:function(e){window.objAnalytics.data.events.push({category:"button",action:"click",label:"open filter panel"}),window.objFilter.show()},btnbookmarksclick:function(e){window.objAnalytics.data.events.push({category:"button",action:"click",label:"open bookmarks panel"}),window.objBookmarks.show()},btnexplainclick:function(e){window.objAnalytics.data.events.push({category:"button",action:"click",label:"open help panel"}),window.objExplain.show()},btnlogoutclick:function(e){window.objAnalytics.data.events.push({category:"button",action:"click",label:"logout"}),window.objLogin.logout()},showtransparentlayer:function(){window.getEl("transparentlayer").style.display="block"},hidetransparentlayer:function(){window.getEl("transparentlayer").style.display="none"},isMobile:{any:function(){return"none"===window.getComputedStyle(window.getEl("map"),null).display}},setmainwrapperclass:function(){window.app.el.outerwrapper.className=window.objConfig.sitetype+" "+window.objPageState.state.filter.sector+" view-"+window.objPageState.state.view+" datasource-"+window.objPageState.state.filter.datasource+" subtype-"+window.objPageState.state.filter.subtype+" orulevel-"+window.objPageState.state.filter.orulevel+" oru-"+window.objPageState.state.filter.oru+" sector-"+window.objPageState.state.filter.sector+" mru-"+window.objPageState.state.filter.mru},retrievemetadata:function(){var e={fulldomain:location.protocol+"//"+location.hostname,method:"getoruandproductdata",type:"json",token:window.objLogin.token,snapshotid:window.objConfig.currentsnapshotid};window.psv("GET",window.objConfig.urls.dynamicresourceurl,e,app.retrievemetadatahandler)},retrievemetadatahandler:function(e,t){e||window.hasProperty(t,"error")?window.hasProperty(t,"error")?window.objError.show("There was an error retrieving metadata information. "+("object"==typeof t?JSON.stringify(t):t),!0):window.objError.show("There was an error retrieving metadata information. "+("object"==typeof e?JSON.stringify(e):e),!0):t.hasOwnProperty("authenticated")&&!t.authenticated?window.handleShibbolethLoginRequired():(window.objOruFilter.json=t.result.orudata,window.objOruFilter.postprocessorudata(),window.objMruFilter.preparehtml(t.result.productdata),app.retrievesustainabilitydata())},retrievesustainabilitydata:function(){var e=this,t={_type:"json",method:"getworldmapdata",token:window.objLogin.token,source:"sustainability",period:"future"};window.psv("GET",window.objConfig.urls.dynamicresourceurl,t,function(t,a){null!=t?window.objError.show("There was an error retrieving the sustainability data. "+("object"==typeof t?JSON.parse(t):t),!0):(window.objData.sustainability=a,e.retrieveglobalpresencedata())})},retrieveglobalpresencedata:function(){var e={_type:"json",method:"getworldmapdata",token:window.objLogin.token,source:"global_presence",period:"future"};window.psv("GET",window.objConfig.urls.dynamicresourceurl,e,function(e,t){null!=e?window.objError.show("There was an error retrieving the Global Presence data. "+("object"==typeof e?JSON.parse(e):e),!0):(window.objData.global_presence=t,app.processinitialview(!0))})},start:function(e){window.objLogin.hide(),window.objMap.updatemap(e,app.showappintromessage)},showappintromessage:function(){var e=window.objStore.getlocalstorageitem("seenAppIntro");window.isPublicSite()?window.objStore.setlocalstorageitem("seenAppIntro","true"):e&&app.state.mobile||!app.state.mobile?window.objLogin.showupdatemessages():(window.objPanelInfo.show("app"),window.objStore.setlocalstorageitem("seenAppIntro","true"))},getdimensions:function(){var e=this;e.state.width=document.body.clientWidth,e.state.height=document.documentElement.clientHeight-.15*document.documentElement.clientHeight-250,e.state.width>e.state.height?e.state.orientation="landscape":e.state.orientation="portrait"},processinitialview:function(e){var t=this;if(location.hash.length>0){var a=window.objPageState.hash2object(location.hash);a.hasOwnProperty("error")?location.hash=window.objPageState.object2hash(t.defaultpagestate):e?window.objPageState.handlechange(a):location.hash.indexOf("!/login/")>-1||(window.objStore.setlocalstorageitem("stateremembered",JSON.stringify(a)),a.view="login",location.hash=window.objPageState.object2hash(a))}else if(null!==window.objStore.getlocalstorageitem("stateremembered"))try{var o=JSON.parse(window.objStore.getlocalstorageitem("stateremembered"));window.objStore.removelocalstorageitem("stateremembered"),location.hash=window.objPageState.object2hash(o)}catch(e){window.objStore.removelocalstorageitem("stateremembered"),location.hash=window.objPageState.object2hash(t.defaultpagestate)}else location.hash=window.objPageState.object2hash(t.defaultpagestate)},initobjects:function(){var e=this;e.getdimensions(),e.state.mobile=e.isMobile.any(),window.objStore.init(),window.objAnalytics.init(),window.objLogin.init(),window.objMap.init(),window.objFooter.init(),window.objHeader.init(),window.objOverlay.init(),window.objRegionInfo.init(),window.objError.init(),window.objFilter.init(),window.objBookmarks.init(),window.objExplain.init(),window.objLoading.init(),window.objPanelInfo.init(),window.objOruFilter.init(),window.objMruFilter.init(),window.objDataFilter.init(),e.state.ios&&(window.objZoomPanSettings.dragtimerdelay=800,window.objZoomPanSettings.touchtimerdelay=300,e.state.ios7&&(window.getEl("title_bar").style.height="65px",window.getEl("info").style.top="10px",window.getEl("btn_back").style.top="10px",window.getEl("toggle_favourite").style.top="10px")),e.setmainwrapperclass(),window.objLogin.getsnapshotconfig()},retrievetranslationfragments:function(e,t){if(e)window.objError.show(e,!0);else{window.app.vars.basehtml=t;var a=location.href.replace(/^(.*)index.*$/,"$1")+"data/locale-"+window.objConfig.lang+("en"===window.objConfig.lang?"_US":"_CN")+".json";(window.location.href.indexOf("results.philips.com")>-1||window.location.href.indexOf("resultshub.com")>-1)&&(a="/publications/ar16/data/locale-"+window.objConfig.lang+("en"===window.objConfig.lang?"_US":"_CN")+".json"),window.psv("GET",a,{v:window.pageVars.version},function(e,t){if(e)window.objError.show("There was an error retrieving translation fragments. "+("object"==typeof e?JSON.stringify(e):e),!0);else{for(var a in t)"string"==typeof a&&(window.objConfig.fragments[a]=t[a]);window.app.vars.basehtml=window.app.vars.basehtml.replace(/\[([a-zA-Z\d\s_-]*?)\]/g,function(e,t,a,o){return window.translateFragment(t)}),app.el.outerwrapper.innerHTML=window.app.vars.basehtml,window.app.initobjects()}})}},init:function(){var e=this;e.el.outerwrapper=window.getEl("content_outer_wrapper"),window.serverSideRequest({url:window.objConfig.urls.base+"/data/body_content.html?v="+window.pageVars.version,method:"get",debug:!1,callback:window.app.retrievetranslationfragments})}},regValid=/^#\!\/(login|worldmap|detail?)\/((\w|\d|-)+)\/((\w|\d|-)+)\/((\w|\d|-)+)\/((\w|\d|-)+)\/(filter|faq|help|bookmark|none?)\/((\w|\d|-)+)\/((\w|\d|-)+?)$/g,objPageState={
state:{view:null,popup:null,filter:{datasource:null,subtype:null,orulevel:null,oru:null,sector:null,mru:null}},stateremembered:{},vars:{processed:0},clonestateobject:function(){var e=this;return{view:e.state.view,popup:e.state.popup,filter:{orulevel:e.state.filter.orulevel,oru:e.state.filter.oru,sector:e.state.filter.sector,mru:e.state.filter.mru,datasource:objPageState.state.filter.datasource}}},setstateobject:function(e){var t=this;e.hasOwnProperty("view")&&(t.state.view=e.view),e.hasOwnProperty("popup")&&(t.state.popup=e.popup),e.hasOwnProperty("filter")&&(e.filter.hasOwnProperty("orulevel")&&(t.state.filter.orulevel=e.filter.orulevel),e.filter.hasOwnProperty("oru")&&(t.state.filter.oru=e.filter.oru),e.filter.hasOwnProperty("sector")&&(t.state.filter.sector=e.filter.sector),e.filter.hasOwnProperty("mru")&&(t.state.filter.mru=e.filter.mru),e.filter.hasOwnProperty("datasource")&&(t.state.filter.datasource=e.filter.datasource),e.filter.hasOwnProperty("subtype")&&(t.state.filter.subtype=e.filter.subtype))},updatepagestate:function(e){var t=objPageState.clonestateobject();e.hasOwnProperty("view")&&(t.view=e.view),e.hasOwnProperty("popup")&&(t.popup=e.popup),e.hasOwnProperty("filter")&&(e.filter.hasOwnProperty("orulevel")&&(t.filter.orulevel=e.filter.orulevel),e.filter.hasOwnProperty("oru")&&(t.filter.oru=e.filter.oru),e.filter.hasOwnProperty("sector")&&(t.filter.sector=e.filter.sector),e.filter.hasOwnProperty("mru")&&(t.filter.mru=e.filter.mru),e.filter.hasOwnProperty("datasource")&&(t.filter.datasource=e.filter.datasource),e.filter.hasOwnProperty("subtype")&&(t.filter.subtype=e.filter.subtype)),location.hash=objPageState.object2hash(t),objPageState.vars.processed++},hash2object:function(e){return regValid.test(e)?{view:e.replace(regValid,"$1"),popup:e.replace(regValid,"$10"),filter:{orulevel:e.replace(regValid,"$2"),oru:e.replace(regValid,"$4"),sector:e.replace(regValid,"$6"),mru:e.replace(regValid,"$8"),datasource:e.replace(regValid,"$11"),subtype:e.replace(regValid,"$13")}}:{error:!0}},object2hash:function(e){return"#!/"+e.view+"/"+e.filter.orulevel+"/"+e.filter.oru+"/"+e.filter.sector+"/"+e.filter.mru+"/"+e.popup+"/"+e.filter.datasource+"/"+(e.filter.subtype?e.filter.subtype:"all")},calculatestatedelta:function(e,t){var a={filter:{}};for(var o in e)if("string"==typeof o&&t.hasOwnProperty(o))if("filter"===o){if(t.hasOwnProperty("filter"))for(var n in e.filter)"string"==typeof n&&t.filter.hasOwnProperty(n)&&e.filter[n]!==t.filter[n]&&(a.filter[n]=t.filter[n])}else e[o]!==t[o]&&(a[o]=t[o]);return a},handlechange:function(e){var t=this,a=t.calculatestatedelta(t.state,e);window.objAnalytics.data.views.push({page:location.hash.substr(2),title:location.hash.replace(regValid,function(){if("login"===e.view)return"/login";if(null==window.objOruFilter.json)return"/nothing";for(var t="/"+arguments[1]+"/"+window.objOruFilter.convertoruleveltomarket(arguments[2]).toLowerCase()+"/"+arguments[4]+"/",a=window.objMruFilter.getmrufilteraxisarray(arguments[8]),o=[],n=0;n<a.length;n++)o.push(a[n].name.toLowerCase().replace(/[\s]/gi,"_").replace(/&amp;/,"and"));return t+=o.join("/")+"/"+arguments[10]})});var o=!1,n=!1,i=!1,r=!1,l=!1,s=!1,d=!1,p=!1;if(t.state.filter.orulevel!==e.filter.orulevel&&(n=!0,o=!0),t.state.filter.oru!==e.filter.oru&&(i=!0,o=!0),t.state.filter.sector!==e.filter.sector&&(r=!0,o=!0),t.state.filter.mru!==e.filter.mru&&(l=!0,o=!0),t.state.filter.datasource!==e.filter.datasource&&(s=!0,o=!0,window.objDataFilter.state.filter.datasource=e.filter.datasource),t.state.filter.subtype!==e.filter.subtype&&(d=!0,o=!0,window.objDataFilter.state.filter.subtype=e.filter.subtype),"login"===t.state.view&&"login"!==e.view&&(p=!0),t.state.mobile&&t.state.initialmapview&&p&&"login"!==e.view&&app.showtransparentlayer(),(n||s||d)&&(window.objMap.datatypes=window.objMap.createdatatypelistforregions(e.filter.orulevel),window.objDataFilter.renderdatasubtypefilters(),d&&"all"!==e.filter.subtype?window.objDataFilter.subtypechanged(e.filter.datasource,e.filter.subtype):window.objDataFilter.datasourcechanged(e.filter.datasource)),i&&"lives_improved"!==e.filter.datasource&&window.objRegionInfo.setdetailspanel(e.filter.datasource,e.filter.subtype),t.state.view!==e.view)switch(e.view){case"login":t.stateremembered=t.clonestateobject(),t.setstateobject(e),window.objLogin.show();break;default:t.updateworldmapview(e,a)}else o&&t.updateworldmapview(e,a);window.objOruFilter.setdatalevelattribute(e.filter.orulevel),t.setstateobject(e),window.app.setmainwrapperclass()},updateworldmapview:function(e,t){var a=this;a.setstateobject(e);var o=!1;t.hasOwnProperty("filter")&&(t.filter.hasOwnProperty("orulevel")||t.filter.hasOwnProperty("datasource")||t.filter.hasOwnProperty("sector"))&&(o=!0),"object"==typeof window.objMap.data&&o===!1?(t.hasOwnProperty("filter")&&t.filter.hasOwnProperty("subtype")&&window.objMap.updatemap("detail"===e.view,app.showappintromessage),"detail"===e.view?window.objMap.detailspanel():(window.objRegionInfo.hide(),window.objMap.hideselectedcountries(),window.objHeader.setregionname(window.objMap.state.mapname))):(window.objOruFilter.settocurrentoru(),"detail"===e.view?app.start(!0):app.start())},copyfilterattributes:function(e){self.state.filter.orulevel!==e.filter.orulevel&&(self.state.filter.orulevel=e.filter.orulevel),self.state.filter.oru!==e.filter.oru&&(self.state.filter.oru=e.filter.oru),self.state.filter.sector!==e.filter.sector&&(self.state.filter.sector=e.filter.sector),self.state.filter.mru!==e.filter.mru&&(self.state.filter.mru=e.filter.mru)},init:function(){}},objAnalytics={data:{views:[],events:[]},state:{enabled:location.href.indexOf("www.results.philips.com")===-1},asyncanalytics:function(){for(var e=this,t=0;t<e.data.views.length;t++)e.state.enabled&&window.ga("send","pageview",e.data.views[t]),t===e.data.views.length-1&&(e.data.views.length=0);for(var t=0;t<e.data.events.length;t++){if(e.data.events[t].hasOwnProperty("category")&&e.data.events[t].hasOwnProperty("action"))switch(Object.keys(e.data.events[t]).length){case 2:e.state.enabled&&window.ga("send","event",e.data.events[t].category,e.data.events[t].action);break;case 3:e.data.events[t].hasOwnProperty("label")&&e.state.enabled&&window.ga("send","event",e.data.events[t].category,e.data.events[t].action,e.data.events[t].label);break;case 4:e.data.events[t].hasOwnProperty("label")&&e.data.events[t].hasOwnProperty("value")&&e.state.enabled&&window.ga("send","event",e.data.events[t].category,e.data.events[t].action,e.data.events[t].label,e.data.events[t].value)}t===e.data.events.length-1&&(e.data.events.length=0)}window.setTimeout(function(){objAnalytics.asyncanalytics()},500)},init:function(){var e=this;if(e.state.enabled){!function(e,t,a,o,n,i,r){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,i=t.createElement(a),r=t.getElementsByTagName(a)[0],i.async=1,i.src=o,r.parentNode.insertBefore(i,r)}(window,document,"script",location.href.indexOf("http")>-1?"//www.google-analytics.com/analytics.js":"js/lib/analytics.js","ga");var t;t=location.href.indexOf("http")>-1?"auto":{storage:"none",clientId:window.objStore.getlocalstorageitem("statguid")},window.ga("create","UA-52778332-1",t),window.ga("set","forceSSL",!0),window.ga("send","pageview",{page:"/start"+(location.href.indexOf("http")>-1?"/website":"/app")}),e.asyncanalytics()}}};window.onresize=function(){app.getdimensions();try{app.isMobile.any()||(window.objMap.resizeworldmap(),window.objMap.centerworldmap(window.objMap.el.rootanimate),window.objRegionInfo.hide())}catch(e){}},window.onhashchange=function(){var e=objPageState.hash2object(location.hash);e.hasOwnProperty("error")?location.hash=objPageState.object2hash(app.defaultpagestate):objPageState.handlechange(e)},window.objData={};